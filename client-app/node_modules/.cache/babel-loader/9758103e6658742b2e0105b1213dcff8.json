{"ast":null,"code":"import _slicedToArray from\"C:\\\\Projects\\\\Reactivities\\\\client-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import{Header,Grid,Button}from\"semantic-ui-react\";import{observer}from\"mobx-react-lite\";import PhotoWidgetDropzone from\"./PhotoWidgetDropzone\";import PhotoWidgetCropper from\"./PhotoWidgetCropper\";export var PhotoUploadWidget=function PhotoUploadWidget(_ref){var loading=_ref.loading,uploadPhoto=_ref.uploadPhoto;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];useEffect(function(){return function(){files.forEach(function(file){return URL.revokeObjectURL(file.preview);});};});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid.Column,{width:4},/*#__PURE__*/React.createElement(Header,{color:\"teal\",sub:true,content:\"Step 1 - Add Photo\"}),/*#__PURE__*/React.createElement(PhotoWidgetDropzone,{setFiles:setFiles})),/*#__PURE__*/React.createElement(Grid.Column,{width:1}),/*#__PURE__*/React.createElement(Grid.Column,{width:4},/*#__PURE__*/React.createElement(Header,{sub:true,color:\"teal\",content:\"Step 2 - Resize image\"}),files.length>0&&/*#__PURE__*/React.createElement(PhotoWidgetCropper,{setImage:setImage,imagePreview:files[0].preview})),/*#__PURE__*/React.createElement(Grid.Column,{width:1}),/*#__PURE__*/React.createElement(Grid.Column,{width:4},/*#__PURE__*/React.createElement(Header,{sub:true,color:\"teal\",content:\"Step 3 - Preview & Upload\"}),files.length>0&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"img-preview\",style:{minHeight:\"200px\",overflow:\"hidden\"}}),/*#__PURE__*/React.createElement(Button.Group,{widths:2},/*#__PURE__*/React.createElement(Button,{positive:true,icon:\"check\",loading:loading,onClick:function onClick(){return uploadPhoto(image);}}),/*#__PURE__*/React.createElement(Button,{icon:\"close\",disabled:loading,onClick:function onClick(){return setFiles([]);}}))))));};export default observer(PhotoUploadWidget);","map":{"version":3,"sources":["C:/Projects/Reactivities/client-app/src/app/common/photoUpload/PhotoUploadWidget.tsx"],"names":["React","Fragment","useState","useEffect","Header","Grid","Button","observer","PhotoWidgetDropzone","PhotoWidgetCropper","PhotoUploadWidget","loading","uploadPhoto","files","setFiles","image","setImage","forEach","file","URL","revokeObjectURL","preview","length","minHeight","overflow"],"mappings":"kKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,MAAvB,KAAqC,mBAArC,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uBAAhC,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,CAMA,MAAO,IAAMC,CAAAA,iBAAmC,CAAG,QAAtCA,CAAAA,iBAAsC,MAG7C,IAFJC,CAAAA,OAEI,MAFJA,OAEI,CADJC,WACI,MADJA,WACI,eACsBV,QAAQ,CAAQ,EAAR,CAD9B,wCACGW,KADH,eACUC,QADV,8BAEsBZ,QAAQ,CAAc,IAAd,CAF9B,yCAEGa,KAFH,eAEUC,QAFV,eAIJb,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,CACXU,KAAK,CAACI,OAAN,CAAc,SAACC,IAAD,QAAUC,CAAAA,GAAG,CAACC,eAAJ,CAAoBF,IAAI,CAACG,OAAzB,CAAV,EAAd,EACD,CAFD,CAGD,CAJQ,CAAT,CAMA,mBACE,oBAAC,QAAD,mBACE,oBAAC,IAAD,mBACE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAApB,eACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,CAAqB,GAAG,KAAxB,CAAyB,OAAO,CAAC,oBAAjC,EADF,cAEE,oBAAC,mBAAD,EAAqB,QAAQ,CAAEP,QAA/B,EAFF,CADF,cAKE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAApB,EALF,cAME,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAApB,eACE,oBAAC,MAAD,EAAQ,GAAG,KAAX,CAAY,KAAK,CAAC,MAAlB,CAAyB,OAAO,CAAC,uBAAjC,EADF,CAEGD,KAAK,CAACS,MAAN,CAAe,CAAf,eACC,oBAAC,kBAAD,EACE,QAAQ,CAAEN,QADZ,CAEE,YAAY,CAAEH,KAAK,CAAC,CAAD,CAAL,CAASQ,OAFzB,EAHJ,CANF,cAeE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAApB,EAfF,cAgBE,oBAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAApB,eACE,oBAAC,MAAD,EAAQ,GAAG,KAAX,CAAY,KAAK,CAAC,MAAlB,CAAyB,OAAO,CAAC,2BAAjC,EADF,CAEGR,KAAK,CAACS,MAAN,CAAe,CAAf,eACC,oBAAC,QAAD,mBACE,2BACE,SAAS,CAAC,aADZ,CAEE,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAb,CAAsBC,QAAQ,CAAE,QAAhC,CAFT,EADF,cAKE,oBAAC,MAAD,CAAQ,KAAR,EAAc,MAAM,CAAE,CAAtB,eACE,oBAAC,MAAD,EACE,QAAQ,KADV,CAEE,IAAI,CAAC,OAFP,CAGE,OAAO,CAAEb,OAHX,CAIE,OAAO,CAAE,yBAAMC,CAAAA,WAAW,CAACG,KAAD,CAAjB,EAJX,EADF,cAOG,oBAAC,MAAD,EAEC,IAAI,CAAC,OAFN,CAGC,QAAQ,CAAEJ,OAHX,CAIC,OAAO,CAAE,yBAAMG,CAAAA,QAAQ,CAAC,EAAD,CAAd,EAJV,EAPH,CALF,CAHJ,CAhBF,CADF,CADF,CA8CD,CA3DM,CA6DP,cAAeP,CAAAA,QAAQ,CAACG,iBAAD,CAAvB","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\nimport { Header, Grid, Button } from \"semantic-ui-react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\r\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\r\n\r\ninterface IProps {\r\n  loading: boolean;\r\n  uploadPhoto: (file: Blob) => void;\r\n}\r\nexport const PhotoUploadWidget: React.FC<IProps> = ({\r\n  loading,\r\n  uploadPhoto,\r\n}) => {\r\n  const [files, setFiles] = useState<any[]>([]);\r\n  const [image, setImage] = useState<Blob | null>(null);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      files.forEach((file) => URL.revokeObjectURL(file.preview));\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid>\r\n        <Grid.Column width={4}>\r\n          <Header color=\"teal\" sub content=\"Step 1 - Add Photo\" />\r\n          <PhotoWidgetDropzone setFiles={setFiles} />\r\n        </Grid.Column>\r\n        <Grid.Column width={1} />\r\n        <Grid.Column width={4}>\r\n          <Header sub color=\"teal\" content=\"Step 2 - Resize image\" />\r\n          {files.length > 0 && (\r\n            <PhotoWidgetCropper\r\n              setImage={setImage}\r\n              imagePreview={files[0].preview}\r\n            />\r\n          )}\r\n        </Grid.Column>\r\n        <Grid.Column width={1} />\r\n        <Grid.Column width={4}>\r\n          <Header sub color=\"teal\" content=\"Step 3 - Preview & Upload\" />\r\n          {files.length > 0 && (\r\n            <Fragment>\r\n              <div\r\n                className=\"img-preview\"\r\n                style={{ minHeight: \"200px\", overflow: \"hidden\" }}\r\n              ></div>\r\n              <Button.Group widths={2}>\r\n                <Button\r\n                  positive\r\n                  icon=\"check\"\r\n                  loading={loading}\r\n                  onClick={() => uploadPhoto(image!)}\r\n                />\r\n                 <Button\r\n                   \r\n                  icon=\"close\"\r\n                  disabled={loading}\r\n                  onClick={() => setFiles([])}\r\n                />\r\n              </Button.Group>\r\n            </Fragment>\r\n          )}\r\n        </Grid.Column>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default observer(PhotoUploadWidget);\r\n"]},"metadata":{},"sourceType":"module"}