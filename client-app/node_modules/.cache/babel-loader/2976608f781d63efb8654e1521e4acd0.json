{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v22.1.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Autowired, Bean } from \"../context/context\";\nimport { Column } from \"../entities/column\";\nimport { Constants } from \"../constants\";\nimport { _ } from \"../utils\";\n\nvar AutoGroupColService =\n/** @class */\nfunction () {\n  function AutoGroupColService() {}\n\n  AutoGroupColService_1 = AutoGroupColService;\n\n  AutoGroupColService.prototype.createAutoGroupColumns = function (rowGroupColumns) {\n    var _this = this;\n\n    var groupAutoColumns = [];\n    var doingTreeData = this.gridOptionsWrapper.isTreeData();\n    var doingMultiAutoColumn = this.gridOptionsWrapper.isGroupMultiAutoColumn();\n\n    if (doingTreeData && doingMultiAutoColumn) {\n      console.warn('ag-Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data');\n      doingMultiAutoColumn = false;\n    } // if doing groupMultiAutoColumn, then we call the method multiple times, once\n    // for each column we are grouping by\n\n\n    if (doingMultiAutoColumn) {\n      rowGroupColumns.forEach(function (rowGroupCol, index) {\n        groupAutoColumns.push(_this.createOneAutoGroupColumn(rowGroupCol, index));\n      });\n    } else {\n      groupAutoColumns.push(this.createOneAutoGroupColumn());\n    }\n\n    return groupAutoColumns;\n  }; // rowGroupCol and index are missing if groupMultiAutoColumn=false\n\n\n  AutoGroupColService.prototype.createOneAutoGroupColumn = function (rowGroupCol, index) {\n    // if one provided by user, use it, otherwise create one\n    var defaultAutoColDef = this.generateDefaultColDef(rowGroupCol); // if doing multi, set the field\n\n    var colId;\n\n    if (rowGroupCol) {\n      colId = Constants.GROUP_AUTO_COLUMN_ID + \"-\" + rowGroupCol.getId();\n    } else {\n      colId = AutoGroupColService_1.GROUP_AUTO_COLUMN_BUNDLE_ID;\n    }\n\n    var userAutoColDef = this.gridOptionsWrapper.getAutoGroupColumnDef();\n\n    _.mergeDeep(defaultAutoColDef, userAutoColDef);\n\n    defaultAutoColDef = this.columnFactory.mergeColDefs(defaultAutoColDef);\n    defaultAutoColDef.colId = colId; // For tree data the filter is always allowed\n\n    if (!this.gridOptionsWrapper.isTreeData()) {\n      // we would only allow filter if the user has provided field or value getter. otherwise the filter\n      // would not be able to work.\n      var noFieldOrValueGetter = _.missing(defaultAutoColDef.field) && _.missing(defaultAutoColDef.valueGetter) && _.missing(defaultAutoColDef.filterValueGetter);\n\n      if (noFieldOrValueGetter) {\n        defaultAutoColDef.filter = false;\n      }\n    } // if showing many cols, we don't want to show more than one with a checkbox for selection\n\n\n    if (index && index > 0) {\n      defaultAutoColDef.headerCheckboxSelection = false;\n    }\n\n    var newCol = new Column(defaultAutoColDef, null, colId, true);\n    this.context.wireBean(newCol);\n    return newCol;\n  };\n\n  AutoGroupColService.prototype.generateDefaultColDef = function (rowGroupCol) {\n    var userAutoColDef = this.gridOptionsWrapper.getAutoGroupColumnDef();\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var defaultAutoColDef = {\n      headerName: localeTextFunc('group', 'Group')\n    };\n    var userHasProvidedGroupCellRenderer = userAutoColDef && (userAutoColDef.cellRenderer || userAutoColDef.cellRendererFramework); // only add the default group cell renderer if user hasn't provided one\n\n    if (!userHasProvidedGroupCellRenderer) {\n      defaultAutoColDef.cellRenderer = 'agGroupCellRenderer';\n    } // we never allow moving the group column\n    // defaultAutoColDef.suppressMovable = true;\n\n\n    if (rowGroupCol) {\n      var rowGroupColDef = rowGroupCol.getColDef();\n\n      _.assign(defaultAutoColDef, {\n        // cellRendererParams.groupKey: colDefToCopy.field;\n        headerName: this.columnController.getDisplayNameForColumn(rowGroupCol, 'header'),\n        headerValueGetter: rowGroupColDef.headerValueGetter\n      });\n\n      if (rowGroupColDef.cellRenderer) {\n        _.assign(defaultAutoColDef, {\n          cellRendererParams: {\n            innerRenderer: rowGroupColDef.cellRenderer,\n            innerRendererParams: rowGroupColDef.cellRendererParams\n          }\n        });\n      }\n\n      defaultAutoColDef.showRowGroup = rowGroupCol.getColId();\n    } else {\n      defaultAutoColDef.showRowGroup = true;\n    }\n\n    return defaultAutoColDef;\n  };\n\n  var AutoGroupColService_1;\n  AutoGroupColService.GROUP_AUTO_COLUMN_BUNDLE_ID = Constants.GROUP_AUTO_COLUMN_ID;\n\n  __decorate([Autowired('gridOptionsWrapper')], AutoGroupColService.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Autowired('context')], AutoGroupColService.prototype, \"context\", void 0);\n\n  __decorate([Autowired('columnController')], AutoGroupColService.prototype, \"columnController\", void 0);\n\n  __decorate([Autowired('columnFactory')], AutoGroupColService.prototype, \"columnFactory\", void 0);\n\n  AutoGroupColService = AutoGroupColService_1 = __decorate([Bean('autoGroupColService')], AutoGroupColService);\n  return AutoGroupColService;\n}();\n\nexport { AutoGroupColService };","map":null,"metadata":{},"sourceType":"module"}