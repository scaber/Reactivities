{"ast":null,"code":"// @ag-grid-community/react v22.1.1\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ChangeDetectionStrategyType;\n\n(function (ChangeDetectionStrategyType) {\n  ChangeDetectionStrategyType[\"IdentityCheck\"] = \"IdentityCheck\";\n  ChangeDetectionStrategyType[\"DeepValueCheck\"] = \"DeepValueCheck\";\n  ChangeDetectionStrategyType[\"NoCheck\"] = \"NoCheck\";\n})(ChangeDetectionStrategyType = exports.ChangeDetectionStrategyType || (exports.ChangeDetectionStrategyType = {}));\n\nvar ChangeDetectionService =\n/** @class */\nfunction () {\n  function ChangeDetectionService() {\n    var _a;\n\n    this.strategyMap = (_a = {}, _a[ChangeDetectionStrategyType.DeepValueCheck] = new DeepValueStrategy(), _a[ChangeDetectionStrategyType.IdentityCheck] = new SimpleFunctionalStrategy(function (a, b) {\n      return a === b;\n    }), _a[ChangeDetectionStrategyType.NoCheck] = new SimpleFunctionalStrategy(function (a, b) {\n      return true;\n    }), _a);\n  }\n\n  ChangeDetectionService.prototype.getStrategy = function (changeDetectionStrategy) {\n    return this.strategyMap[changeDetectionStrategy];\n  };\n\n  return ChangeDetectionService;\n}();\n\nexports.ChangeDetectionService = ChangeDetectionService;\n\nvar SimpleFunctionalStrategy =\n/** @class */\nfunction () {\n  function SimpleFunctionalStrategy(strategy) {\n    this.strategy = strategy;\n  }\n\n  SimpleFunctionalStrategy.prototype.areEqual = function (a, b) {\n    return this.strategy(a, b);\n  };\n\n  return SimpleFunctionalStrategy;\n}();\n\nvar DeepValueStrategy =\n/** @class */\nfunction () {\n  function DeepValueStrategy() {}\n\n  DeepValueStrategy.prototype.areEqual = function (a, b) {\n    return DeepValueStrategy.areEquivalent(DeepValueStrategy.copy(a), DeepValueStrategy.copy(b));\n  };\n  /*\n   * deeper object comparison - taken from https://stackoverflow.com/questions/1068834/object-comparison-in-javascript\n   */\n\n\n  DeepValueStrategy.unwrapStringOrNumber = function (obj) {\n    return obj instanceof Number || obj instanceof String ? obj.valueOf() : obj;\n  }; // sigh, here for ie compatibility\n\n\n  DeepValueStrategy.copy = function (value) {\n    if (!value) {\n      return value;\n    }\n\n    if (Array.isArray(value)) {\n      // shallow copy the array - this will typically be either rowData or columnDefs\n      var arrayCopy = [];\n\n      for (var i = 0; i < value.length; i++) {\n        arrayCopy.push(this.copy(value[i]));\n      }\n\n      return arrayCopy;\n    } // for anything without keys (boolean, string etc).\n    // Object.keys - chrome will swallow them, IE will fail (correctly, imho)\n\n\n    if (typeof value !== \"object\") {\n      return value;\n    }\n\n    return [{}, value].reduce(function (r, o) {\n      Object.keys(o).forEach(function (k) {\n        r[k] = o[k];\n      });\n      return r;\n    }, {});\n  };\n\n  DeepValueStrategy.isNaN = function (value) {\n    if (Number.isNaN) {\n      return Number.isNaN(value);\n    } // for ie11...\n\n\n    return typeof value === 'number' && isNaN(value);\n  };\n  /*\n   * slightly modified, but taken from https://stackoverflow.com/questions/1068834/object-comparison-in-javascript\n   *\n   * What we're trying to do here is determine if the property being checked has changed in _value_, not just in reference\n   *\n   * For eg, if a user updates the columnDefs via property binding, but the actual columns defs are the same before and\n   * after, then we don't want the grid to re-render\n   */\n\n\n  DeepValueStrategy.areEquivalent = function (a, b) {\n    a = DeepValueStrategy.unwrapStringOrNumber(a);\n    b = DeepValueStrategy.unwrapStringOrNumber(b);\n    if (a === b) return true; //e.g. a and b both null\n\n    if (a === null || b === null || typeof a !== typeof b) return false;\n\n    if (DeepValueStrategy.isNaN(a) && DeepValueStrategy.isNaN(b)) {\n      return true;\n    }\n\n    if (a instanceof Date) {\n      return b instanceof Date && a.valueOf() === b.valueOf();\n    }\n\n    if (typeof a === \"function\") {\n      return a.toString() === b.toString();\n    }\n\n    if (typeof a !== \"object\") {\n      return a == b; //for boolean, number, string, function, xml\n    }\n\n    var newA = a.areEquivPropertyTracking === undefined,\n        newB = b.areEquivPropertyTracking === undefined;\n\n    try {\n      var prop = void 0;\n\n      if (newA) {\n        a.areEquivPropertyTracking = [];\n      } else if (a.areEquivPropertyTracking.some(function (other) {\n        return other === b;\n      })) return true;\n\n      if (newB) {\n        b.areEquivPropertyTracking = [];\n      } else if (b.areEquivPropertyTracking.some(function (other) {\n        return other === a;\n      })) {\n        return true;\n      }\n\n      a.areEquivPropertyTracking.push(b);\n      b.areEquivPropertyTracking.push(a);\n      var tmp = {};\n\n      for (prop in a) if (prop != \"areEquivPropertyTracking\") {\n        tmp[prop] = null;\n      }\n\n      for (prop in b) if (prop != \"areEquivPropertyTracking\") {\n        tmp[prop] = null;\n      }\n\n      for (prop in tmp) {\n        if (!this.areEquivalent(a[prop], b[prop])) {\n          return false;\n        }\n      }\n\n      return true;\n    } finally {\n      if (newA) delete a.areEquivPropertyTracking;\n      if (newB) delete b.areEquivPropertyTracking;\n    }\n  };\n\n  return DeepValueStrategy;\n}();","map":null,"metadata":{},"sourceType":"script"}