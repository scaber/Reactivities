{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _activeElement = _interopRequireDefault(require(\"dom-helpers/activeElement\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _reactComponentManagers = require(\"react-component-managers\");\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _uncontrollable = _interopRequireDefault(require(\"uncontrollable\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _AddToListOption = _interopRequireDefault(require(\"./AddToListOption\"));\n\nvar _DropdownListInput = _interopRequireDefault(require(\"./DropdownListInput\"));\n\nvar _messages = require(\"./messages\");\n\nvar Props = _interopRequireWildcard(require(\"./util/Props\"));\n\nvar Filter = _interopRequireWildcard(require(\"./util/Filter\"));\n\nvar _focusManager = _interopRequireDefault(require(\"./util/focusManager\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./util/PropTypes\"));\n\nvar _reduceToListState = _interopRequireDefault(require(\"./util/reduceToListState\"));\n\nvar _getAccessors = _interopRequireDefault(require(\"./util/getAccessors\"));\n\nvar _scrollManager = _interopRequireDefault(require(\"./util/scrollManager\"));\n\nvar _interaction = require(\"./util/interaction\");\n\nvar _widgetHelpers = require(\"./util/widgetHelpers\");\n\nvar _dataHelpers = require(\"./util/dataHelpers\");\n\nvar _Icon = require(\"./Icon\");\n\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _class3, _temp;\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and set to use loose mode. ' + 'To use proposal-class-properties in spec mode with decorators, wait for ' + 'the next major version of decorators in stage 2.');\n}\n\nvar CREATE_OPTION = {};\n/**\n * ---\n * shortcuts:\n *   - { key: alt + down arrow, label: open dropdown }\n *   - { key: alt + up arrow, label: close dropdown }\n *   - { key: down arrow, label: move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: ctrl + enter, label: create new option from current searchTerm }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * A `<select>` replacement for single value lists.\n * @public\n */\n\nvar DropdownList = (0, _reactLifecyclesCompat.polyfill)(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DropdownList, _React$Component);\n\n  function DropdownList() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleFocusChanged = function (focused) {\n      if (!focused) _this.close();\n    };\n\n    _initializerDefineProperty(_this, \"handleSelect\", _descriptor, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleCreate\", _descriptor2, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleClick\", _descriptor3, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleKeyDown\", _descriptor4, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleKeyPress\", _descriptor5, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.handleInputChange = function (e) {\n      _this.search(e.target.value, e, 'input');\n    };\n\n    _this.handleAutofillChange = function (e) {\n      var data = _this.props.data;\n      var filledValue = e.target.value.toLowerCase();\n      if (filledValue === '') return void _this.change(null);\n\n      for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var item = _ref;\n        var value = (0, _dataHelpers.dataValue)(item);\n\n        if (String(value).toLowerCase() === filledValue || (0, _dataHelpers.dataText)(item).toLowerCase() === filledValue) {\n          _this.change(item, e);\n\n          break;\n        }\n      }\n    };\n\n    _this.handleAutofill = function (autofilling) {\n      _this.setState({\n        autofilling: autofilling\n      });\n    };\n\n    _this.attachInputRef = function (ref) {\n      return _this.inputRef = ref;\n    };\n\n    _this.attachFilterRef = function (ref) {\n      return _this.filterRef = ref;\n    };\n\n    _this.attachListRef = function (ref) {\n      return _this.listRef = ref;\n    };\n\n    _this.focus = function (target) {\n      var _this$props = _this.props,\n          filter = _this$props.filter,\n          open = _this$props.open;\n      var inst = target || (filter && open ? _this.filterRef : _this.inputRef);\n      inst = (0, _reactDom.findDOMNode)(inst);\n      if (inst && (0, _activeElement.default)() !== inst) inst.focus();\n    };\n\n    (0, _reactComponentManagers.autoFocus)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.inputId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_input');\n    _this.listId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_listbox');\n    _this.activeId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_listbox_active_option');\n    _this.mounted = (0, _reactComponentManagers.mountManager)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.timeouts = (0, _reactComponentManagers.timeoutManager)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleScroll = (0, _scrollManager.default)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.focusManager = (0, _focusManager.default)(_assertThisInitialized(_assertThisInitialized(_this)), {\n      didHandle: _this.handleFocusChanged\n    });\n    _this.state = {};\n    return _this;\n  }\n\n  DropdownList.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var open = nextProps.open,\n        value = nextProps.value,\n        data = nextProps.data,\n        messages = nextProps.messages,\n        searchTerm = nextProps.searchTerm,\n        filter = nextProps.filter,\n        minLength = nextProps.minLength,\n        caseSensitive = nextProps.caseSensitive;\n    var focusedItem = prevState.focusedItem;\n    var accessors = (0, _getAccessors.default)(nextProps);\n    var valueChanged = value !== prevState.lastValue;\n    var initialIdx = valueChanged && accessors.indexOf(data, value);\n    if (open) data = Filter.filter(data, {\n      filter: filter,\n      searchTerm: searchTerm,\n      minLength: minLength,\n      caseSensitive: caseSensitive,\n      textField: accessors.text\n    });\n    var list = (0, _reduceToListState.default)(data, prevState.list, {\n      nextProps: nextProps\n    });\n    var selectedItem = data[initialIdx];\n    var nextFocusedItem = ~data.indexOf(focusedItem) ? focusedItem : data[0];\n    return {\n      data: data,\n      list: list,\n      accessors: accessors,\n      lastValue: value,\n      messages: (0, _messages.getMessages)(messages),\n      selectedItem: valueChanged ? list.nextEnabled(selectedItem) : prevState.selectedItem,\n      focusedItem: valueChanged || focusedItem === undefined ? list.nextEnabled(selectedItem !== undefined ? selectedItem : nextFocusedItem) : nextFocusedItem\n    };\n  };\n\n  var _proto = DropdownList.prototype;\n\n  _proto.change = function change(nextValue, originalEvent) {\n    var _this$props2 = this.props,\n        onChange = _this$props2.onChange,\n        searchTerm = _this$props2.searchTerm,\n        lastValue = _this$props2.value;\n\n    if (!this.state.accessors.matches(nextValue, lastValue)) {\n      (0, _widgetHelpers.notify)(onChange, [nextValue, {\n        originalEvent: originalEvent,\n        lastValue: lastValue,\n        searchTerm: searchTerm\n      }]);\n      this.clearSearch(originalEvent);\n      this.close();\n    }\n  };\n\n  _proto.renderList = function renderList() {\n    var _this$props3 = this.props,\n        open = _this$props3.open,\n        filter = _this$props3.filter,\n        data = _this$props3.data,\n        searchTerm = _this$props3.searchTerm,\n        searchIcon = _this$props3.searchIcon,\n        optionComponent = _this$props3.optionComponent,\n        itemComponent = _this$props3.itemComponent,\n        groupComponent = _this$props3.groupComponent,\n        listProps = _this$props3.listProps;\n    var _this$state = this.state,\n        list = _this$state.list,\n        accessors = _this$state.accessors,\n        focusedItem = _this$state.focusedItem,\n        selectedItem = _this$state.selectedItem,\n        messages = _this$state.messages,\n        filteredData = _this$state.data;\n    var List = this.props.listComponent;\n    return _react.default.createElement(\"div\", null, filter && _react.default.createElement(_WidgetPicker.default, {\n      className: \"rw-filter-input rw-input\"\n    }, _react.default.createElement(\"input\", {\n      value: searchTerm,\n      className: \"rw-input-reset\",\n      onChange: this.handleInputChange,\n      placeholder: messages.filterPlaceholder(this.props),\n      ref: this.attachFilterRef\n    }), _react.default.createElement(_Select.default, {\n      icon: searchIcon,\n      role: \"presentation\",\n      \"aria-hidden\": \"true\"\n    })), _react.default.createElement(List, _extends({}, listProps, {\n      id: this.listId,\n      activeId: this.activeId,\n      data: filteredData,\n      dataState: list.dataState,\n      isDisabled: list.isDisabled,\n      searchTerm: searchTerm,\n      textAccessor: accessors.text,\n      valueAccessor: accessors.value,\n      itemComponent: itemComponent,\n      groupComponent: groupComponent,\n      optionComponent: optionComponent,\n      selectedItem: selectedItem,\n      focusedItem: open ? focusedItem : null,\n      onSelect: this.handleSelect,\n      onMove: this.handleScroll,\n      \"aria-live\": open && 'polite',\n      \"aria-labelledby\": this.inputId,\n      \"aria-hidden\": !this.props.open,\n      ref: this.attachListRef,\n      messages: {\n        emptyList: data.length ? messages.emptyFilter : messages.emptyList\n      }\n    })), this.allowCreate() && _react.default.createElement(_AddToListOption.default, {\n      id: this.createId,\n      searchTerm: searchTerm,\n      onSelect: this.handleCreate,\n      focused: !focusedItem || focusedItem === CREATE_OPTION\n    }, messages.createOption(this.props)));\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        className = _this$props4.className,\n        tabIndex = _this$props4.tabIndex,\n        popupTransition = _this$props4.popupTransition,\n        textField = _this$props4.textField,\n        data = _this$props4.data,\n        busy = _this$props4.busy,\n        dropUp = _this$props4.dropUp,\n        placeholder = _this$props4.placeholder,\n        value = _this$props4.value,\n        open = _this$props4.open,\n        isRtl = _this$props4.isRtl,\n        filter = _this$props4.filter,\n        inputProps = _this$props4.inputProps,\n        selectIcon = _this$props4.selectIcon,\n        busySpinner = _this$props4.busySpinner,\n        containerClassName = _this$props4.containerClassName,\n        valueComponent = _this$props4.valueComponent;\n    var _this$state2 = this.state,\n        focused = _this$state2.focused,\n        accessors = _this$state2.accessors,\n        messages = _this$state2.messages,\n        autofilling = _this$state2.autofilling;\n    var disabled = this.props.disabled === true;\n    var readOnly = this.props.readOnly === true;\n    var valueItem = accessors.findOrSelf(data, value);\n    var shouldRenderPopup = (0, _widgetHelpers.isFirstFocusedRender)(this);\n\n    var elementProps = _extends(Props.pickElementProps(this), {\n      name: undefined,\n      role: 'combobox',\n      id: this.inputId,\n      tabIndex: open && filter ? -1 : tabIndex || 0,\n      'aria-owns': this.listId,\n      'aria-activedescendant': open ? this.activeId : null,\n      'aria-expanded': !!open,\n      'aria-haspopup': true,\n      'aria-busy': !!busy,\n      'aria-live': !open && 'polite',\n      'aria-autocomplete': 'list',\n      'aria-disabled': disabled,\n      'aria-readonly': readOnly\n    });\n\n    return _react.default.createElement(_Widget.default, _extends({}, elementProps, {\n      open: open,\n      isRtl: isRtl,\n      dropUp: dropUp,\n      focused: focused,\n      disabled: disabled,\n      readOnly: readOnly,\n      autofilling: autofilling,\n      onBlur: this.focusManager.handleBlur,\n      onFocus: this.focusManager.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      className: (0, _classnames.default)(className, 'rw-dropdown-list'),\n      ref: this.attachInputRef\n    }), _react.default.createElement(_WidgetPicker.default, {\n      onClick: this.handleClick,\n      className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n    }, _react.default.createElement(_DropdownListInput.default, _extends({}, inputProps, {\n      value: valueItem,\n      textField: textField,\n      name: this.props.name,\n      autoComplete: this.props.autoComplete,\n      onAutofill: this.handleAutofill,\n      onAutofillChange: this.handleAutofillChange,\n      placeholder: placeholder,\n      valueComponent: valueComponent\n    })), _react.default.createElement(_Select.default, {\n      busy: busy,\n      icon: selectIcon,\n      spinner: busySpinner,\n      role: \"presentational\",\n      \"aria-hidden\": \"true\",\n      disabled: disabled || readOnly,\n      label: messages.openDropdown(this.props)\n    })), shouldRenderPopup && _react.default.createElement(_Popup.default, {\n      open: open,\n      dropUp: dropUp,\n      transition: popupTransition,\n      onEntered: function onEntered() {\n        return _this2.focus();\n      },\n      onEntering: function onEntering() {\n        return _this2.listRef.forceUpdate();\n      }\n    }, this.renderList(messages)));\n  };\n\n  _proto.findOption = function findOption(character, cb) {\n    var _this3 = this;\n\n    var word = ((this._currentWord || '') + character).toLowerCase();\n    if (!character) return;\n    this._currentWord = word;\n    this.timeouts.set('search', function () {\n      var list = _this3.state.list;\n      var key = _this3.props.open ? 'focusedItem' : 'selectedItem';\n      var item = list.next(_this3.state[key], word);\n\n      if (item === _this3.state[key]) {\n        item = list.next(null, word);\n      }\n\n      _this3._currentWord = '';\n      if (item) cb(item);\n    }, this.props.delay);\n  };\n\n  _proto.clearSearch = function clearSearch(originalEvent) {\n    this.search('', originalEvent, 'clear');\n  };\n\n  _proto.search = function search(searchTerm, originalEvent, action) {\n    if (action === void 0) {\n      action = 'input';\n    }\n\n    var _this$props5 = this.props,\n        onSearch = _this$props5.onSearch,\n        lastSearchTerm = _this$props5.searchTerm;\n    if (searchTerm !== lastSearchTerm) (0, _widgetHelpers.notify)(onSearch, [searchTerm, {\n      action: action,\n      lastSearchTerm: lastSearchTerm,\n      originalEvent: originalEvent\n    }]);\n  };\n\n  _proto.open = function open() {\n    if (!this.props.open) (0, _widgetHelpers.notify)(this.props.onToggle, true);\n  };\n\n  _proto.close = function close() {\n    if (this.props.open) (0, _widgetHelpers.notify)(this.props.onToggle, false);\n  };\n\n  _proto.toggle = function toggle() {\n    this.props.open ? this.close() : this.open();\n  };\n\n  _proto.allowCreate = function allowCreate() {\n    var _this$props6 = this.props,\n        searchTerm = _this$props6.searchTerm,\n        onCreate = _this$props6.onCreate,\n        allowCreate = _this$props6.allowCreate;\n    return !!(onCreate && (allowCreate === true || allowCreate === 'onFilter' && searchTerm) && !this.hasExtactMatch());\n  };\n\n  _proto.hasExtactMatch = function hasExtactMatch() {\n    var _this$props7 = this.props,\n        searchTerm = _this$props7.searchTerm,\n        caseSensitive = _this$props7.caseSensitive,\n        filter = _this$props7.filter;\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        accessors = _this$state3.accessors;\n\n    var lower = function lower(text) {\n      return caseSensitive ? text : text.toLowerCase();\n    }; // if there is an exact match on textFields:\n\n\n    return filter && data.some(function (v) {\n      return lower(accessors.text(v)) === lower(searchTerm);\n    });\n  };\n\n  return DropdownList;\n}(_react.default.Component), _class3.propTypes = _extends({}, Filter.propTypes, {\n  value: _propTypes.default.any,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any,\n   *  metadata: {\n   *    lastValue: ?any,\n   *    searchTerm: ?string\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  onToggle: _propTypes.default.func,\n  data: _propTypes.default.array,\n  valueField: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   * A React component for customizing the rendering of the DropdownList\n   * value\n   */\n  valueComponent: CustomPropTypes.elementType,\n  itemComponent: CustomPropTypes.elementType,\n  listComponent: CustomPropTypes.elementType,\n  optionComponent: CustomPropTypes.elementType,\n  groupComponent: CustomPropTypes.elementType,\n  groupBy: CustomPropTypes.accessor,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: _propTypes.default.func,\n  onCreate: _propTypes.default.func,\n\n  /**\n   * @type function(searchTerm: string, metadata: { action, lastSearchTerm, originalEvent? })\n   */\n  onSearch: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n  searchIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  placeholder: _propTypes.default.string,\n  dropUp: _propTypes.default.bool,\n  popupTransition: CustomPropTypes.elementType,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  isRtl: _propTypes.default.bool,\n  messages: _propTypes.default.shape({\n    open: _propTypes.default.string,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    filterPlaceholder: _propTypes.default.string,\n    createOption: CustomPropTypes.message\n  })\n}), _class3.defaultProps = {\n  data: [],\n  delay: 500,\n  searchTerm: '',\n  allowCreate: false,\n  searchIcon: _Icon.search,\n  selectIcon: _Icon.caretDown,\n  listComponent: _List.default\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"handleSelect\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this4 = this;\n\n    return function (dataItem, originalEvent) {\n      if (dataItem === undefined || dataItem === CREATE_OPTION) {\n        _this4.handleCreate(_this4.props.searchTerm);\n\n        return;\n      }\n\n      (0, _widgetHelpers.notify)(_this4.props.onSelect, [dataItem, {\n        originalEvent: originalEvent\n      }]);\n\n      _this4.change(dataItem, originalEvent);\n\n      _this4.close();\n\n      _this4.focus(_this4);\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"handleCreate\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this5 = this;\n\n    return function (searchTerm, event) {\n      if (searchTerm === void 0) {\n        searchTerm = '';\n      }\n\n      (0, _widgetHelpers.notify)(_this5.props.onCreate, searchTerm);\n\n      _this5.clearSearch(event);\n\n      _this5.close();\n\n      _this5.focus(_this5);\n    };\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"handleClick\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this6 = this;\n\n    return function (e) {\n      _this6.focus();\n\n      _this6.toggle();\n\n      (0, _widgetHelpers.notify)(_this6.props.onClick, e);\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"handleKeyDown\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this7 = this;\n\n    return function (e) {\n      var key = e.key,\n          altKey = e.altKey,\n          ctrlKey = e.ctrlKey;\n      var _this7$props = _this7.props,\n          open = _this7$props.open,\n          onKeyDown = _this7$props.onKeyDown,\n          filter = _this7$props.filter,\n          searchTerm = _this7$props.searchTerm;\n      var _this7$state = _this7.state,\n          focusedItem = _this7$state.focusedItem,\n          selectedItem = _this7$state.selectedItem,\n          list = _this7$state.list;\n      var createIsFocused = focusedItem === CREATE_OPTION;\n\n      var canCreate = _this7.allowCreate();\n\n      (0, _widgetHelpers.notify)(onKeyDown, [e]);\n\n      var closeWithFocus = function closeWithFocus() {\n        _this7.close();\n\n        (0, _reactDom.findDOMNode)(_this7).focus();\n      };\n\n      var change = function change(item) {\n        return item != null && _this7.change(item, e);\n      };\n\n      var focusItem = function focusItem(item) {\n        return _this7.setState({\n          focusedItem: item\n        });\n      };\n\n      if (e.defaultPrevented) return;\n\n      if (key === 'End') {\n        e.preventDefault();\n        if (open) focusItem(list.last());else change(list.last());\n      } else if (key === 'Home') {\n        e.preventDefault();\n        if (open) focusItem(list.first());else change(list.first());\n      } else if (key === 'Escape' && open) {\n        e.preventDefault();\n        closeWithFocus();\n      } else if (key === 'Enter' && open && ctrlKey && canCreate) {\n        e.preventDefault();\n\n        _this7.handleCreate(searchTerm, e);\n      } else if ((key === 'Enter' || key === ' ' && !filter) && open) {\n        e.preventDefault();\n\n        _this7.handleSelect(focusedItem, e);\n      } else if (key === ' ' && !open) {\n        e.preventDefault();\n\n        _this7.open();\n      } else if (key === 'ArrowDown') {\n        e.preventDefault();\n        if (altKey) return _this7.open();\n        if (!open) change(list.next(selectedItem));\n        var next = list.next(focusedItem);\n        var creating = createIsFocused || canCreate && focusedItem === next;\n        focusItem(creating ? CREATE_OPTION : next);\n      } else if (key === 'ArrowUp') {\n        e.preventDefault();\n        if (altKey) return closeWithFocus();\n        if (!open) return change(list.prev(selectedItem));\n        focusItem(createIsFocused ? list.last() : list.prev(focusedItem));\n      }\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"handleKeyPress\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this8 = this;\n\n    return function (e) {\n      (0, _widgetHelpers.notify)(_this8.props.onKeyPress, [e]);\n      if (e.defaultPrevented) return;\n      if (!(_this8.props.filter && _this8.props.open)) _this8.findOption(String.fromCharCode(e.which), function (item) {\n        _this8.mounted() && _this8.props.open ? _this8.setState({\n          focusedItem: item\n        }) : item && _this8.change(item, e);\n      });\n    };\n  }\n})), _class2)) || _class;\n\nvar _default = (0, _uncontrollable.default)(DropdownList, {\n  open: 'onToggle',\n  value: 'onChange',\n  searchTerm: 'onSearch'\n}, ['focus']);\n\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["C:/Projects/Reactivities/client-app/node_modules/react-widgets/lib/DropdownList.js"],"names":["exports","__esModule","default","_react","_interopRequireDefault","require","_reactDom","_propTypes","_activeElement","_classnames","_reactComponentManagers","_reactLifecyclesCompat","_uncontrollable","_Widget","_WidgetPicker","_Select","_Popup","_List","_AddToListOption","_DropdownListInput","_messages","Props","_interopRequireWildcard","Filter","_focusManager","CustomPropTypes","_reduceToListState","_getAccessors","_scrollManager","_interaction","_widgetHelpers","_dataHelpers","_Icon","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_class3","_temp","obj","newObj","key","Object","prototype","hasOwnProperty","call","desc","defineProperty","getOwnPropertyDescriptor","get","set","_extends","assign","target","i","arguments","length","source","apply","_initializerDefineProperty","property","descriptor","context","enumerable","configurable","writable","value","initializer","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_assertThisInitialized","self","ReferenceError","_applyDecoratedDescriptor","decorators","forEach","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","CREATE_OPTION","DropdownList","polyfill","_React$Component","_this","_len","args","Array","_key","concat","handleFocusChanged","focused","close","handleInputChange","e","search","handleAutofillChange","data","props","filledValue","toLowerCase","change","_iterator","_isArray","isArray","_i","Symbol","iterator","_ref","next","done","item","dataValue","String","dataText","handleAutofill","autofilling","setState","attachInputRef","ref","inputRef","attachFilterRef","filterRef","attachListRef","listRef","focus","_this$props","filter","open","inst","findDOMNode","autoFocus","inputId","instanceId","listId","activeId","mounted","mountManager","timeouts","timeoutManager","handleScroll","focusManager","didHandle","state","getDerivedStateFromProps","nextProps","prevState","messages","searchTerm","minLength","caseSensitive","focusedItem","accessors","valueChanged","lastValue","initialIdx","indexOf","textField","text","list","selectedItem","nextFocusedItem","getMessages","nextEnabled","_proto","nextValue","originalEvent","_this$props2","onChange","matches","notify","clearSearch","renderList","_this$props3","searchIcon","optionComponent","itemComponent","groupComponent","listProps","_this$state","filteredData","List","listComponent","createElement","className","placeholder","filterPlaceholder","icon","role","id","dataState","isDisabled","textAccessor","valueAccessor","onSelect","handleSelect","onMove","emptyList","emptyFilter","allowCreate","createId","handleCreate","createOption","render","_this2","_this$props4","tabIndex","popupTransition","busy","dropUp","isRtl","inputProps","selectIcon","busySpinner","containerClassName","valueComponent","_this$state2","disabled","readOnly","valueItem","findOrSelf","shouldRenderPopup","isFirstFocusedRender","elementProps","pickElementProps","name","onBlur","handleBlur","onFocus","handleFocus","onKeyDown","handleKeyDown","onKeyPress","handleKeyPress","onClick","handleClick","autoComplete","onAutofill","onAutofillChange","spinner","label","openDropdown","transition","onEntered","onEntering","forceUpdate","findOption","character","cb","_this3","word","_currentWord","delay","action","_this$props5","onSearch","lastSearchTerm","onToggle","toggle","_this$props6","onCreate","hasExtactMatch","_this$props7","_this$state3","lower","some","v","Component","propTypes","any","func","bool","array","valueField","accessor","oneOf","elementType","groupBy","string","node","acceptsArray","object","shape","message","defaultProps","caretDown","widgetEditable","_this4","dataItem","_this5","event","_this6","_this7","altKey","ctrlKey","_this7$props","_this7$state","createIsFocused","canCreate","closeWithFocus","focusItem","defaultPrevented","preventDefault","last","first","creating","prev","_this8","fromCharCode","which","_default","module"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,MAAM,GAAGC,sBAAsB,CAACC,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAvB;;AAEA,IAAIE,UAAU,GAAGH,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIG,cAAc,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAA3C;;AAEA,IAAII,WAAW,GAAGL,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAxC;;AAEA,IAAIK,uBAAuB,GAAGL,OAAO,CAAC,0BAAD,CAArC;;AAEA,IAAIM,sBAAsB,GAAGN,OAAO,CAAC,yBAAD,CAApC;;AAEA,IAAIO,eAAe,GAAGR,sBAAsB,CAACC,OAAO,CAAC,gBAAD,CAAR,CAA5C;;AAEA,IAAIQ,OAAO,GAAGT,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAApC;;AAEA,IAAIS,aAAa,GAAGV,sBAAsB,CAACC,OAAO,CAAC,gBAAD,CAAR,CAA1C;;AAEA,IAAIU,OAAO,GAAGX,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAApC;;AAEA,IAAIW,MAAM,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAAnC;;AAEA,IAAIY,KAAK,GAAGb,sBAAsB,CAACC,OAAO,CAAC,QAAD,CAAR,CAAlC;;AAEA,IAAIa,gBAAgB,GAAGd,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAA7C;;AAEA,IAAIc,kBAAkB,GAAGf,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAA/C;;AAEA,IAAIe,SAAS,GAAGf,OAAO,CAAC,YAAD,CAAvB;;AAEA,IAAIgB,KAAK,GAAGC,uBAAuB,CAACjB,OAAO,CAAC,cAAD,CAAR,CAAnC;;AAEA,IAAIkB,MAAM,GAAGD,uBAAuB,CAACjB,OAAO,CAAC,eAAD,CAAR,CAApC;;AAEA,IAAImB,aAAa,GAAGpB,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAA1C;;AAEA,IAAIoB,eAAe,GAAGH,uBAAuB,CAACjB,OAAO,CAAC,kBAAD,CAAR,CAA7C;;AAEA,IAAIqB,kBAAkB,GAAGtB,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAA/C;;AAEA,IAAIsB,aAAa,GAAGvB,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAA1C;;AAEA,IAAIuB,cAAc,GAAGxB,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAA3C;;AAEA,IAAIwB,YAAY,GAAGxB,OAAO,CAAC,oBAAD,CAA1B;;AAEA,IAAIyB,cAAc,GAAGzB,OAAO,CAAC,sBAAD,CAA5B;;AAEA,IAAI0B,YAAY,GAAG1B,OAAO,CAAC,oBAAD,CAA1B;;AAEA,IAAI2B,KAAK,GAAG3B,OAAO,CAAC,QAAD,CAAnB;;AAEA,IAAI4B,MAAJ,EAAYC,OAAZ,EAAqBC,WAArB,EAAkCC,YAAlC,EAAgDC,YAAhD,EAA8DC,YAA9D,EAA4EC,YAA5E,EAA0FC,OAA1F,EAAmGC,KAAnG;;AAEA,SAASnB,uBAAT,CAAiCoB,GAAjC,EAAsC;AAAE,MAAIA,GAAG,IAAIA,GAAG,CAACzC,UAAf,EAA2B;AAAE,WAAOyC,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAIC,MAAM,GAAG,EAAb;;AAAiB,QAAID,GAAG,IAAI,IAAX,EAAiB;AAAE,WAAK,IAAIE,GAAT,IAAgBF,GAAhB,EAAqB;AAAE,YAAIG,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CE,GAA1C,CAAJ,EAAoD;AAAE,cAAIK,IAAI,GAAGJ,MAAM,CAACK,cAAP,IAAyBL,MAAM,CAACM,wBAAhC,GAA2DN,MAAM,CAACM,wBAAP,CAAgCT,GAAhC,EAAqCE,GAArC,CAA3D,GAAuG,EAAlH;;AAAsH,cAAIK,IAAI,CAACG,GAAL,IAAYH,IAAI,CAACI,GAArB,EAA0B;AAAER,YAAAA,MAAM,CAACK,cAAP,CAAsBP,MAAtB,EAA8BC,GAA9B,EAAmCK,IAAnC;AAA2C,WAAvE,MAA6E;AAAEN,YAAAA,MAAM,CAACC,GAAD,CAAN,GAAcF,GAAG,CAACE,GAAD,CAAjB;AAAyB;AAAE;AAAE;AAAE;;AAACD,IAAAA,MAAM,CAACzC,OAAP,GAAiBwC,GAAjB;AAAsB,WAAOC,MAAP;AAAgB;AAAE;;AAExd,SAASvC,sBAAT,CAAgCsC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACzC,UAAX,GAAwByC,GAAxB,GAA8B;AAAExC,IAAAA,OAAO,EAAEwC;AAAX,GAArC;AAAwD;;AAE/F,SAASY,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGT,MAAM,CAACU,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAIb,GAAT,IAAgBgB,MAAhB,EAAwB;AAAE,YAAIf,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCY,MAArC,EAA6ChB,GAA7C,CAAJ,EAAuD;AAAEY,UAAAA,MAAM,CAACZ,GAAD,CAAN,GAAcgB,MAAM,CAAChB,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOY,MAAP;AAAgB,GAA5P;;AAA8P,SAAOF,QAAQ,CAACO,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AAAyC;;AAE7T,SAASI,0BAAT,CAAoCN,MAApC,EAA4CO,QAA5C,EAAsDC,UAAtD,EAAkEC,OAAlE,EAA2E;AAAE,MAAI,CAACD,UAAL,EAAiB;AAAQnB,EAAAA,MAAM,CAACK,cAAP,CAAsBM,MAAtB,EAA8BO,QAA9B,EAAwC;AAAEG,IAAAA,UAAU,EAAEF,UAAU,CAACE,UAAzB;AAAqCC,IAAAA,YAAY,EAAEH,UAAU,CAACG,YAA9D;AAA4EC,IAAAA,QAAQ,EAAEJ,UAAU,CAACI,QAAjG;AAA2GC,IAAAA,KAAK,EAAEL,UAAU,CAACM,WAAX,GAAyBN,UAAU,CAACM,WAAX,CAAuBtB,IAAvB,CAA4BiB,OAA5B,CAAzB,GAAgE,KAAK;AAAvL,GAAxC;AAAsO;;AAE5U,SAASM,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AAAED,EAAAA,QAAQ,CAAC1B,SAAT,GAAqBD,MAAM,CAAC6B,MAAP,CAAcD,UAAU,CAAC3B,SAAzB,CAArB;AAA0D0B,EAAAA,QAAQ,CAAC1B,SAAT,CAAmB6B,WAAnB,GAAiCH,QAAjC;AAA2CA,EAAAA,QAAQ,CAACI,SAAT,GAAqBH,UAArB;AAAkC;;AAEvL,SAASI,sBAAT,CAAgCC,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOD,IAAP;AAAc;;AAEtK,SAASE,yBAAT,CAAmCxB,MAAnC,EAA2CO,QAA3C,EAAqDkB,UAArD,EAAiEjB,UAAjE,EAA6EC,OAA7E,EAAsF;AAAE,MAAIhB,IAAI,GAAG,EAAX;AAAeJ,EAAAA,MAAM,CAAC,OAAO,IAAR,CAAN,CAAoBmB,UAApB,EAAgCkB,OAAhC,CAAwC,UAAUtC,GAAV,EAAe;AAAEK,IAAAA,IAAI,CAACL,GAAD,CAAJ,GAAYoB,UAAU,CAACpB,GAAD,CAAtB;AAA8B,GAAvF;AAA0FK,EAAAA,IAAI,CAACiB,UAAL,GAAkB,CAAC,CAACjB,IAAI,CAACiB,UAAzB;AAAqCjB,EAAAA,IAAI,CAACkB,YAAL,GAAoB,CAAC,CAAClB,IAAI,CAACkB,YAA3B;;AAAyC,MAAI,WAAWlB,IAAX,IAAmBA,IAAI,CAACqB,WAA5B,EAAyC;AAAErB,IAAAA,IAAI,CAACmB,QAAL,GAAgB,IAAhB;AAAuB;;AAACnB,EAAAA,IAAI,GAAGgC,UAAU,CAACE,KAAX,GAAmBC,OAAnB,GAA6BC,MAA7B,CAAoC,UAAUpC,IAAV,EAAgBqC,SAAhB,EAA2B;AAAE,WAAOA,SAAS,CAAC9B,MAAD,EAASO,QAAT,EAAmBd,IAAnB,CAAT,IAAqCA,IAA5C;AAAmD,GAApH,EAAsHA,IAAtH,CAAP;;AAAoI,MAAIgB,OAAO,IAAIhB,IAAI,CAACqB,WAAL,KAAqB,KAAK,CAAzC,EAA4C;AAAErB,IAAAA,IAAI,CAACoB,KAAL,GAAapB,IAAI,CAACqB,WAAL,GAAmBrB,IAAI,CAACqB,WAAL,CAAiBtB,IAAjB,CAAsBiB,OAAtB,CAAnB,GAAoD,KAAK,CAAtE;AAAyEhB,IAAAA,IAAI,CAACqB,WAAL,GAAmBiB,SAAnB;AAA+B;;AAAC,MAAItC,IAAI,CAACqB,WAAL,KAAqB,KAAK,CAA9B,EAAiC;AAAEzB,IAAAA,MAAM,CAAC,WAAW,UAAZ,CAAN,CAA8BW,MAA9B,EAAsCO,QAAtC,EAAgDd,IAAhD;AAAuDA,IAAAA,IAAI,GAAG,IAAP;AAAc;;AAAC,SAAOA,IAAP;AAAc;;AAEpuB,SAASuC,yBAAT,CAAmCxB,UAAnC,EAA+CC,OAA/C,EAAwD;AAAE,QAAM,IAAIwB,KAAJ,CAAU,0DAA0D,kEAA1D,GAA+H,0EAA/H,GAA4M,kDAAtN,CAAN;AAAkR;;AAE5U,IAAIC,aAAa,GAAG,EAApB;AACA;;;;;;;;;;;;;;;;;;AAkBA,IAAIC,YAAY,GAAG,CAAC,GAAGhF,sBAAsB,CAACiF,QAA3B,EAAqC3D,MAAM,IAAIC,OAAO,IAAIO,KAAK,GAAGD,OAAO,GAC5F,aACA,UAAUqD,gBAAV,EAA4B;AAC1BtB,EAAAA,cAAc,CAACoB,YAAD,EAAeE,gBAAf,CAAd;;AAEA,WAASF,YAAT,GAAwB;AACtB,QAAIG,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGrC,SAAS,CAACC,MAArB,EAA6BqC,IAAI,GAAG,IAAIC,KAAJ,CAAUF,IAAV,CAApC,EAAqDG,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGH,IAA3E,EAAiFG,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaxC,SAAS,CAACwC,IAAD,CAAtB;AACD;;AAEDJ,IAAAA,KAAK,GAAGD,gBAAgB,CAAC7C,IAAjB,CAAsBa,KAAtB,CAA4BgC,gBAA5B,EAA8C,CAAC,IAAD,EAAOM,MAAP,CAAcH,IAAd,CAA9C,KAAsE,IAA9E;;AAEAF,IAAAA,KAAK,CAACM,kBAAN,GAA2B,UAAUC,OAAV,EAAmB;AAC5C,UAAI,CAACA,OAAL,EAAcP,KAAK,CAACQ,KAAN;AACf,KAFD;;AAIAxC,IAAAA,0BAA0B,CAACgC,KAAD,EAAQ,cAAR,EAAwB3D,WAAxB,EAAqC0C,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA3D,CAA1B;;AAEAhC,IAAAA,0BAA0B,CAACgC,KAAD,EAAQ,cAAR,EAAwB1D,YAAxB,EAAsCyC,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA5D,CAA1B;;AAEAhC,IAAAA,0BAA0B,CAACgC,KAAD,EAAQ,aAAR,EAAuBzD,YAAvB,EAAqCwC,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA3D,CAA1B;;AAEAhC,IAAAA,0BAA0B,CAACgC,KAAD,EAAQ,eAAR,EAAyBxD,YAAzB,EAAuCuC,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA7D,CAA1B;;AAEAhC,IAAAA,0BAA0B,CAACgC,KAAD,EAAQ,gBAAR,EAA0BvD,YAA1B,EAAwCsC,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA9D,CAA1B;;AAEAA,IAAAA,KAAK,CAACS,iBAAN,GAA0B,UAAUC,CAAV,EAAa;AACrCV,MAAAA,KAAK,CAACW,MAAN,CAAaD,CAAC,CAAChD,MAAF,CAASa,KAAtB,EAA6BmC,CAA7B,EAAgC,OAAhC;AACD,KAFD;;AAIAV,IAAAA,KAAK,CAACY,oBAAN,GAA6B,UAAUF,CAAV,EAAa;AACxC,UAAIG,IAAI,GAAGb,KAAK,CAACc,KAAN,CAAYD,IAAvB;AACA,UAAIE,WAAW,GAAGL,CAAC,CAAChD,MAAF,CAASa,KAAT,CAAeyC,WAAf,EAAlB;AACA,UAAID,WAAW,KAAK,EAApB,EAAwB,OAAO,KAAKf,KAAK,CAACiB,MAAN,CAAa,IAAb,CAAZ;;AAExB,WAAK,IAAIC,SAAS,GAAGL,IAAhB,EAAsBM,QAAQ,GAAGhB,KAAK,CAACiB,OAAN,CAAcF,SAAd,CAAjC,EAA2DG,EAAE,GAAG,CAAhE,EAAmEH,SAAS,GAAGC,QAAQ,GAAGD,SAAH,GAAeA,SAAS,CAACI,MAAM,CAACC,QAAR,CAAT,EAA3G,IAA2I;AACzI,YAAIC,IAAJ;;AAEA,YAAIL,QAAJ,EAAc;AACZ,cAAIE,EAAE,IAAIH,SAAS,CAACrD,MAApB,EAA4B;AAC5B2D,UAAAA,IAAI,GAAGN,SAAS,CAACG,EAAE,EAAH,CAAhB;AACD,SAHD,MAGO;AACLA,UAAAA,EAAE,GAAGH,SAAS,CAACO,IAAV,EAAL;AACA,cAAIJ,EAAE,CAACK,IAAP,EAAa;AACbF,UAAAA,IAAI,GAAGH,EAAE,CAAC9C,KAAV;AACD;;AAED,YAAIoD,IAAI,GAAGH,IAAX;AACA,YAAIjD,KAAK,GAAG,CAAC,GAAGtC,YAAY,CAAC2F,SAAjB,EAA4BD,IAA5B,CAAZ;;AAEA,YAAIE,MAAM,CAACtD,KAAD,CAAN,CAAcyC,WAAd,OAAgCD,WAAhC,IAA+C,CAAC,GAAG9E,YAAY,CAAC6F,QAAjB,EAA2BH,IAA3B,EAAiCX,WAAjC,OAAmDD,WAAtG,EAAmH;AACjHf,UAAAA,KAAK,CAACiB,MAAN,CAAaU,IAAb,EAAmBjB,CAAnB;;AAEA;AACD;AACF;AACF,KA1BD;;AA4BAV,IAAAA,KAAK,CAAC+B,cAAN,GAAuB,UAAUC,WAAV,EAAuB;AAC5ChC,MAAAA,KAAK,CAACiC,QAAN,CAAe;AACbD,QAAAA,WAAW,EAAEA;AADA,OAAf;AAGD,KAJD;;AAMAhC,IAAAA,KAAK,CAACkC,cAAN,GAAuB,UAAUC,GAAV,EAAe;AACpC,aAAOnC,KAAK,CAACoC,QAAN,GAAiBD,GAAxB;AACD,KAFD;;AAIAnC,IAAAA,KAAK,CAACqC,eAAN,GAAwB,UAAUF,GAAV,EAAe;AACrC,aAAOnC,KAAK,CAACsC,SAAN,GAAkBH,GAAzB;AACD,KAFD;;AAIAnC,IAAAA,KAAK,CAACuC,aAAN,GAAsB,UAAUJ,GAAV,EAAe;AACnC,aAAOnC,KAAK,CAACwC,OAAN,GAAgBL,GAAvB;AACD,KAFD;;AAIAnC,IAAAA,KAAK,CAACyC,KAAN,GAAc,UAAU/E,MAAV,EAAkB;AAC9B,UAAIgF,WAAW,GAAG1C,KAAK,CAACc,KAAxB;AAAA,UACI6B,MAAM,GAAGD,WAAW,CAACC,MADzB;AAAA,UAEIC,IAAI,GAAGF,WAAW,CAACE,IAFvB;AAGA,UAAIC,IAAI,GAAGnF,MAAM,KAAKiF,MAAM,IAAIC,IAAV,GAAiB5C,KAAK,CAACsC,SAAvB,GAAmCtC,KAAK,CAACoC,QAA9C,CAAjB;AACAS,MAAAA,IAAI,GAAG,CAAC,GAAGrI,SAAS,CAACsI,WAAd,EAA2BD,IAA3B,CAAP;AACA,UAAIA,IAAI,IAAI,CAAC,GAAGnI,cAAc,CAACN,OAAnB,QAAkCyI,IAA9C,EAAoDA,IAAI,CAACJ,KAAL;AACrD,KAPD;;AASA,KAAC,GAAG7H,uBAAuB,CAACmI,SAA5B,EAAuChE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAA7D;AACAA,IAAAA,KAAK,CAACgD,OAAN,GAAgB,CAAC,GAAGhH,cAAc,CAACiH,UAAnB,EAA+BlE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAArD,EAAsF,QAAtF,CAAhB;AACAA,IAAAA,KAAK,CAACkD,MAAN,GAAe,CAAC,GAAGlH,cAAc,CAACiH,UAAnB,EAA+BlE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAArD,EAAsF,UAAtF,CAAf;AACAA,IAAAA,KAAK,CAACmD,QAAN,GAAiB,CAAC,GAAGnH,cAAc,CAACiH,UAAnB,EAA+BlE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAArD,EAAsF,wBAAtF,CAAjB;AACAA,IAAAA,KAAK,CAACoD,OAAN,GAAgB,CAAC,GAAGxI,uBAAuB,CAACyI,YAA5B,EAA0CtE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAAhE,CAAhB;AACAA,IAAAA,KAAK,CAACsD,QAAN,GAAiB,CAAC,GAAG1I,uBAAuB,CAAC2I,cAA5B,EAA4CxE,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAAlE,CAAjB;AACAA,IAAAA,KAAK,CAACwD,YAAN,GAAqB,CAAC,GAAG1H,cAAc,CAAC1B,OAAnB,EAA4B2E,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAAlD,CAArB;AACAA,IAAAA,KAAK,CAACyD,YAAN,GAAqB,CAAC,GAAG/H,aAAa,CAACtB,OAAlB,EAA2B2E,sBAAsB,CAACA,sBAAsB,CAACiB,KAAD,CAAvB,CAAjD,EAAkF;AACrG0D,MAAAA,SAAS,EAAE1D,KAAK,CAACM;AADoF,KAAlF,CAArB;AAGAN,IAAAA,KAAK,CAAC2D,KAAN,GAAc,EAAd;AACA,WAAO3D,KAAP;AACD;;AAEDH,EAAAA,YAAY,CAAC+D,wBAAb,GAAwC,SAASA,wBAAT,CAAkCC,SAAlC,EAA6CC,SAA7C,EAAwD;AAC9F,QAAIlB,IAAI,GAAGiB,SAAS,CAACjB,IAArB;AAAA,QACIrE,KAAK,GAAGsF,SAAS,CAACtF,KADtB;AAAA,QAEIsC,IAAI,GAAGgD,SAAS,CAAChD,IAFrB;AAAA,QAGIkD,QAAQ,GAAGF,SAAS,CAACE,QAHzB;AAAA,QAIIC,UAAU,GAAGH,SAAS,CAACG,UAJ3B;AAAA,QAKIrB,MAAM,GAAGkB,SAAS,CAAClB,MALvB;AAAA,QAMIsB,SAAS,GAAGJ,SAAS,CAACI,SAN1B;AAAA,QAOIC,aAAa,GAAGL,SAAS,CAACK,aAP9B;AAQA,QAAIC,WAAW,GAAGL,SAAS,CAACK,WAA5B;AACA,QAAIC,SAAS,GAAG,CAAC,GAAGvI,aAAa,CAACzB,OAAlB,EAA2ByJ,SAA3B,CAAhB;AACA,QAAIQ,YAAY,GAAG9F,KAAK,KAAKuF,SAAS,CAACQ,SAAvC;AACA,QAAIC,UAAU,GAAGF,YAAY,IAAID,SAAS,CAACI,OAAV,CAAkB3D,IAAlB,EAAwBtC,KAAxB,CAAjC;AACA,QAAIqE,IAAJ,EAAU/B,IAAI,GAAGpF,MAAM,CAACkH,MAAP,CAAc9B,IAAd,EAAoB;AACnC8B,MAAAA,MAAM,EAAEA,MAD2B;AAEnCqB,MAAAA,UAAU,EAAEA,UAFuB;AAGnCC,MAAAA,SAAS,EAAEA,SAHwB;AAInCC,MAAAA,aAAa,EAAEA,aAJoB;AAKnCO,MAAAA,SAAS,EAAEL,SAAS,CAACM;AALc,KAApB,CAAP;AAOV,QAAIC,IAAI,GAAG,CAAC,GAAG/I,kBAAkB,CAACxB,OAAvB,EAAgCyG,IAAhC,EAAsCiD,SAAS,CAACa,IAAhD,EAAsD;AAC/Dd,MAAAA,SAAS,EAAEA;AADoD,KAAtD,CAAX;AAGA,QAAIe,YAAY,GAAG/D,IAAI,CAAC0D,UAAD,CAAvB;AACA,QAAIM,eAAe,GAAG,CAAChE,IAAI,CAAC2D,OAAL,CAAaL,WAAb,CAAD,GAA6BA,WAA7B,GAA2CtD,IAAI,CAAC,CAAD,CAArE;AACA,WAAO;AACLA,MAAAA,IAAI,EAAEA,IADD;AAEL8D,MAAAA,IAAI,EAAEA,IAFD;AAGLP,MAAAA,SAAS,EAAEA,SAHN;AAILE,MAAAA,SAAS,EAAE/F,KAJN;AAKLwF,MAAAA,QAAQ,EAAE,CAAC,GAAGzI,SAAS,CAACwJ,WAAd,EAA2Bf,QAA3B,CALL;AAMLa,MAAAA,YAAY,EAAEP,YAAY,GAAGM,IAAI,CAACI,WAAL,CAAiBH,YAAjB,CAAH,GAAoCd,SAAS,CAACc,YANnE;AAOLT,MAAAA,WAAW,EAAEE,YAAY,IAAIF,WAAW,KAAK1E,SAAhC,GAA4CkF,IAAI,CAACI,WAAL,CAAiBH,YAAY,KAAKnF,SAAjB,GAA6BmF,YAA7B,GAA4CC,eAA7D,CAA5C,GAA4HA;AAPpI,KAAP;AASD,GAlCD;;AAoCA,MAAIG,MAAM,GAAGnF,YAAY,CAAC7C,SAA1B;;AAEAgI,EAAAA,MAAM,CAAC/D,MAAP,GAAgB,SAASA,MAAT,CAAgBgE,SAAhB,EAA2BC,aAA3B,EAA0C;AACxD,QAAIC,YAAY,GAAG,KAAKrE,KAAxB;AAAA,QACIsE,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,QAEIpB,UAAU,GAAGmB,YAAY,CAACnB,UAF9B;AAAA,QAGIM,SAAS,GAAGa,YAAY,CAAC5G,KAH7B;;AAKA,QAAI,CAAC,KAAKoF,KAAL,CAAWS,SAAX,CAAqBiB,OAArB,CAA6BJ,SAA7B,EAAwCX,SAAxC,CAAL,EAAyD;AACvD,OAAC,GAAGtI,cAAc,CAACsJ,MAAnB,EAA2BF,QAA3B,EAAqC,CAACH,SAAD,EAAY;AAC/CC,QAAAA,aAAa,EAAEA,aADgC;AAE/CZ,QAAAA,SAAS,EAAEA,SAFoC;AAG/CN,QAAAA,UAAU,EAAEA;AAHmC,OAAZ,CAArC;AAKA,WAAKuB,WAAL,CAAiBL,aAAjB;AACA,WAAK1E,KAAL;AACD;AACF,GAfD;;AAiBAwE,EAAAA,MAAM,CAACQ,UAAP,GAAoB,SAASA,UAAT,GAAsB;AACxC,QAAIC,YAAY,GAAG,KAAK3E,KAAxB;AAAA,QACI8B,IAAI,GAAG6C,YAAY,CAAC7C,IADxB;AAAA,QAEID,MAAM,GAAG8C,YAAY,CAAC9C,MAF1B;AAAA,QAGI9B,IAAI,GAAG4E,YAAY,CAAC5E,IAHxB;AAAA,QAIImD,UAAU,GAAGyB,YAAY,CAACzB,UAJ9B;AAAA,QAKI0B,UAAU,GAAGD,YAAY,CAACC,UAL9B;AAAA,QAMIC,eAAe,GAAGF,YAAY,CAACE,eANnC;AAAA,QAOIC,aAAa,GAAGH,YAAY,CAACG,aAPjC;AAAA,QAQIC,cAAc,GAAGJ,YAAY,CAACI,cARlC;AAAA,QASIC,SAAS,GAAGL,YAAY,CAACK,SAT7B;AAUA,QAAIC,WAAW,GAAG,KAAKpC,KAAvB;AAAA,QACIgB,IAAI,GAAGoB,WAAW,CAACpB,IADvB;AAAA,QAEIP,SAAS,GAAG2B,WAAW,CAAC3B,SAF5B;AAAA,QAGID,WAAW,GAAG4B,WAAW,CAAC5B,WAH9B;AAAA,QAIIS,YAAY,GAAGmB,WAAW,CAACnB,YAJ/B;AAAA,QAKIb,QAAQ,GAAGgC,WAAW,CAAChC,QAL3B;AAAA,QAMIiC,YAAY,GAAGD,WAAW,CAAClF,IAN/B;AAOA,QAAIoF,IAAI,GAAG,KAAKnF,KAAL,CAAWoF,aAAtB;AACA,WAAO7L,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6B,KAA7B,EAAoC,IAApC,EAA0CxD,MAAM,IAAItI,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BnL,aAAa,CAACZ,OAA3C,EAAoD;AAC7GgM,MAAAA,SAAS,EAAE;AADkG,KAApD,EAExD/L,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6B,OAA7B,EAAsC;AACvC5H,MAAAA,KAAK,EAAEyF,UADgC;AAEvCoC,MAAAA,SAAS,EAAE,gBAF4B;AAGvChB,MAAAA,QAAQ,EAAE,KAAK3E,iBAHwB;AAIvC4F,MAAAA,WAAW,EAAEtC,QAAQ,CAACuC,iBAAT,CAA2B,KAAKxF,KAAhC,CAJ0B;AAKvCqB,MAAAA,GAAG,EAAE,KAAKE;AAL6B,KAAtC,CAFwD,EAQvDhI,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BlL,OAAO,CAACb,OAArC,EAA8C;AAChDmM,MAAAA,IAAI,EAAEb,UAD0C;AAEhDc,MAAAA,IAAI,EAAE,cAF0C;AAGhD,qBAAe;AAHiC,KAA9C,CARuD,CAApD,EAYFnM,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BF,IAA7B,EAAmCzI,QAAQ,CAAC,EAAD,EAAKsI,SAAL,EAAgB;AAC9DW,MAAAA,EAAE,EAAE,KAAKvD,MADqD;AAE9DC,MAAAA,QAAQ,EAAE,KAAKA,QAF+C;AAG9DtC,MAAAA,IAAI,EAAEmF,YAHwD;AAI9DU,MAAAA,SAAS,EAAE/B,IAAI,CAAC+B,SAJ8C;AAK9DC,MAAAA,UAAU,EAAEhC,IAAI,CAACgC,UAL6C;AAM9D3C,MAAAA,UAAU,EAAEA,UANkD;AAO9D4C,MAAAA,YAAY,EAAExC,SAAS,CAACM,IAPsC;AAQ9DmC,MAAAA,aAAa,EAAEzC,SAAS,CAAC7F,KARqC;AAS9DqH,MAAAA,aAAa,EAAEA,aAT+C;AAU9DC,MAAAA,cAAc,EAAEA,cAV8C;AAW9DF,MAAAA,eAAe,EAAEA,eAX6C;AAY9Df,MAAAA,YAAY,EAAEA,YAZgD;AAa9DT,MAAAA,WAAW,EAAEvB,IAAI,GAAGuB,WAAH,GAAiB,IAb4B;AAc9D2C,MAAAA,QAAQ,EAAE,KAAKC,YAd+C;AAe9DC,MAAAA,MAAM,EAAE,KAAKxD,YAfiD;AAgB9D,mBAAaZ,IAAI,IAAI,QAhByC;AAiB9D,yBAAmB,KAAKI,OAjBsC;AAkB9D,qBAAe,CAAC,KAAKlC,KAAL,CAAW8B,IAlBmC;AAmB9DT,MAAAA,GAAG,EAAE,KAAKI,aAnBoD;AAoB9DwB,MAAAA,QAAQ,EAAE;AACRkD,QAAAA,SAAS,EAAEpG,IAAI,CAAChD,MAAL,GAAckG,QAAQ,CAACmD,WAAvB,GAAqCnD,QAAQ,CAACkD;AADjD;AApBoD,KAAhB,CAA3C,CAZE,EAmCF,KAAKE,WAAL,MAAsB9M,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6B/K,gBAAgB,CAAChB,OAA9C,EAAuD;AAChFqM,MAAAA,EAAE,EAAE,KAAKW,QADuE;AAEhFpD,MAAAA,UAAU,EAAEA,UAFoE;AAGhF8C,MAAAA,QAAQ,EAAE,KAAKO,YAHiE;AAIhF9G,MAAAA,OAAO,EAAE,CAAC4D,WAAD,IAAgBA,WAAW,KAAKvE;AAJuC,KAAvD,EAKxBmE,QAAQ,CAACuD,YAAT,CAAsB,KAAKxG,KAA3B,CALwB,CAnCpB,CAAP;AAyCD,GA5DD;;AA8DAkE,EAAAA,MAAM,CAACuC,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,YAAY,GAAG,KAAK3G,KAAxB;AAAA,QACIsF,SAAS,GAAGqB,YAAY,CAACrB,SAD7B;AAAA,QAEIsB,QAAQ,GAAGD,YAAY,CAACC,QAF5B;AAAA,QAGIC,eAAe,GAAGF,YAAY,CAACE,eAHnC;AAAA,QAIIlD,SAAS,GAAGgD,YAAY,CAAChD,SAJ7B;AAAA,QAKI5D,IAAI,GAAG4G,YAAY,CAAC5G,IALxB;AAAA,QAMI+G,IAAI,GAAGH,YAAY,CAACG,IANxB;AAAA,QAOIC,MAAM,GAAGJ,YAAY,CAACI,MAP1B;AAAA,QAQIxB,WAAW,GAAGoB,YAAY,CAACpB,WAR/B;AAAA,QASI9H,KAAK,GAAGkJ,YAAY,CAAClJ,KATzB;AAAA,QAUIqE,IAAI,GAAG6E,YAAY,CAAC7E,IAVxB;AAAA,QAWIkF,KAAK,GAAGL,YAAY,CAACK,KAXzB;AAAA,QAYInF,MAAM,GAAG8E,YAAY,CAAC9E,MAZ1B;AAAA,QAaIoF,UAAU,GAAGN,YAAY,CAACM,UAb9B;AAAA,QAcIC,UAAU,GAAGP,YAAY,CAACO,UAd9B;AAAA,QAeIC,WAAW,GAAGR,YAAY,CAACQ,WAf/B;AAAA,QAgBIC,kBAAkB,GAAGT,YAAY,CAACS,kBAhBtC;AAAA,QAiBIC,cAAc,GAAGV,YAAY,CAACU,cAjBlC;AAkBA,QAAIC,YAAY,GAAG,KAAKzE,KAAxB;AAAA,QACIpD,OAAO,GAAG6H,YAAY,CAAC7H,OAD3B;AAAA,QAEI6D,SAAS,GAAGgE,YAAY,CAAChE,SAF7B;AAAA,QAGIL,QAAQ,GAAGqE,YAAY,CAACrE,QAH5B;AAAA,QAII/B,WAAW,GAAGoG,YAAY,CAACpG,WAJ/B;AAKA,QAAIqG,QAAQ,GAAG,KAAKvH,KAAL,CAAWuH,QAAX,KAAwB,IAAvC;AACA,QAAIC,QAAQ,GAAG,KAAKxH,KAAL,CAAWwH,QAAX,KAAwB,IAAvC;AACA,QAAIC,SAAS,GAAGnE,SAAS,CAACoE,UAAV,CAAqB3H,IAArB,EAA2BtC,KAA3B,CAAhB;AACA,QAAIkK,iBAAiB,GAAG,CAAC,GAAGzM,cAAc,CAAC0M,oBAAnB,EAAyC,IAAzC,CAAxB;;AAEA,QAAIC,YAAY,GAAGnL,QAAQ,CAACjC,KAAK,CAACqN,gBAAN,CAAuB,IAAvB,CAAD,EAA+B;AACxDC,MAAAA,IAAI,EAAEpJ,SADkD;AAExD+G,MAAAA,IAAI,EAAE,UAFkD;AAGxDC,MAAAA,EAAE,EAAE,KAAKzD,OAH+C;AAIxD0E,MAAAA,QAAQ,EAAE9E,IAAI,IAAID,MAAR,GAAiB,CAAC,CAAlB,GAAsB+E,QAAQ,IAAI,CAJY;AAKxD,mBAAa,KAAKxE,MALsC;AAMxD,+BAAyBN,IAAI,GAAG,KAAKO,QAAR,GAAmB,IANQ;AAOxD,uBAAiB,CAAC,CAACP,IAPqC;AAQxD,uBAAiB,IARuC;AASxD,mBAAa,CAAC,CAACgF,IATyC;AAUxD,mBAAa,CAAChF,IAAD,IAAS,QAVkC;AAWxD,2BAAqB,MAXmC;AAYxD,uBAAiByF,QAZuC;AAaxD,uBAAiBC;AAbuC,KAA/B,CAA3B;;AAgBA,WAAOjO,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BpL,OAAO,CAACX,OAArC,EAA8CoD,QAAQ,CAAC,EAAD,EAAKmL,YAAL,EAAmB;AAC9E/F,MAAAA,IAAI,EAAEA,IADwE;AAE9EkF,MAAAA,KAAK,EAAEA,KAFuE;AAG9ED,MAAAA,MAAM,EAAEA,MAHsE;AAI9EtH,MAAAA,OAAO,EAAEA,OAJqE;AAK9E8H,MAAAA,QAAQ,EAAEA,QALoE;AAM9EC,MAAAA,QAAQ,EAAEA,QANoE;AAO9EtG,MAAAA,WAAW,EAAEA,WAPiE;AAQ9E8G,MAAAA,MAAM,EAAE,KAAKrF,YAAL,CAAkBsF,UARoD;AAS9EC,MAAAA,OAAO,EAAE,KAAKvF,YAAL,CAAkBwF,WATmD;AAU9EC,MAAAA,SAAS,EAAE,KAAKC,aAV8D;AAW9EC,MAAAA,UAAU,EAAE,KAAKC,cAX6D;AAY9EjD,MAAAA,SAAS,EAAE,CAAC,GAAGzL,WAAW,CAACP,OAAhB,EAAyBgM,SAAzB,EAAoC,kBAApC,CAZmE;AAa9EjE,MAAAA,GAAG,EAAE,KAAKD;AAboE,KAAnB,CAAtD,EAcH7H,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BnL,aAAa,CAACZ,OAA3C,EAAoD;AACtDkP,MAAAA,OAAO,EAAE,KAAKC,WADwC;AAEtDnD,MAAAA,SAAS,EAAE,CAAC,GAAGzL,WAAW,CAACP,OAAhB,EAAyB8N,kBAAzB,EAA6C,iBAA7C;AAF2C,KAApD,EAGD7N,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6B9K,kBAAkB,CAACjB,OAAhD,EAAyDoD,QAAQ,CAAC,EAAD,EAAKuK,UAAL,EAAiB;AACnFxJ,MAAAA,KAAK,EAAEgK,SAD4E;AAEnF9D,MAAAA,SAAS,EAAEA,SAFwE;AAGnFoE,MAAAA,IAAI,EAAE,KAAK/H,KAAL,CAAW+H,IAHkE;AAInFW,MAAAA,YAAY,EAAE,KAAK1I,KAAL,CAAW0I,YAJ0D;AAKnFC,MAAAA,UAAU,EAAE,KAAK1H,cALkE;AAMnF2H,MAAAA,gBAAgB,EAAE,KAAK9I,oBAN4D;AAOnFyF,MAAAA,WAAW,EAAEA,WAPsE;AAQnF8B,MAAAA,cAAc,EAAEA;AARmE,KAAjB,CAAjE,CAHC,EAYC9N,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BlL,OAAO,CAACb,OAArC,EAA8C;AACjDwN,MAAAA,IAAI,EAAEA,IAD2C;AAEjDrB,MAAAA,IAAI,EAAEyB,UAF2C;AAGjD2B,MAAAA,OAAO,EAAE1B,WAHwC;AAIjDzB,MAAAA,IAAI,EAAE,gBAJ2C;AAKjD,qBAAe,MALkC;AAMjD6B,MAAAA,QAAQ,EAAEA,QAAQ,IAAIC,QAN2B;AAOjDsB,MAAAA,KAAK,EAAE7F,QAAQ,CAAC8F,YAAT,CAAsB,KAAK/I,KAA3B;AAP0C,KAA9C,CAZD,CAdG,EAkCF2H,iBAAiB,IAAIpO,MAAM,CAACD,OAAP,CAAe+L,aAAf,CAA6BjL,MAAM,CAACd,OAApC,EAA6C;AACrEwI,MAAAA,IAAI,EAAEA,IAD+D;AAErEiF,MAAAA,MAAM,EAAEA,MAF6D;AAGrEiC,MAAAA,UAAU,EAAEnC,eAHyD;AAIrEoC,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,eAAOvC,MAAM,CAAC/E,KAAP,EAAP;AACD,OANoE;AAOrEuH,MAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,eAAOxC,MAAM,CAAChF,OAAP,CAAeyH,WAAf,EAAP;AACD;AAToE,KAA7C,EAUvB,KAAKzE,UAAL,CAAgBzB,QAAhB,CAVuB,CAlCnB,CAAP;AA6CD,GA5FD;;AA8FAiB,EAAAA,MAAM,CAACkF,UAAP,GAAoB,SAASA,UAAT,CAAoBC,SAApB,EAA+BC,EAA/B,EAAmC;AACrD,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,IAAI,GAAG,CAAC,CAAC,KAAKC,YAAL,IAAqB,EAAtB,IAA4BJ,SAA7B,EAAwCnJ,WAAxC,EAAX;AACA,QAAI,CAACmJ,SAAL,EAAgB;AAChB,SAAKI,YAAL,GAAoBD,IAApB;AACA,SAAKhH,QAAL,CAAc/F,GAAd,CAAkB,QAAlB,EAA4B,YAAY;AACtC,UAAIoH,IAAI,GAAG0F,MAAM,CAAC1G,KAAP,CAAagB,IAAxB;AACA,UAAI7H,GAAG,GAAGuN,MAAM,CAACvJ,KAAP,CAAa8B,IAAb,GAAoB,aAApB,GAAoC,cAA9C;AACA,UAAIjB,IAAI,GAAGgD,IAAI,CAAClD,IAAL,CAAU4I,MAAM,CAAC1G,KAAP,CAAa7G,GAAb,CAAV,EAA6BwN,IAA7B,CAAX;;AAEA,UAAI3I,IAAI,KAAK0I,MAAM,CAAC1G,KAAP,CAAa7G,GAAb,CAAb,EAAgC;AAC9B6E,QAAAA,IAAI,GAAGgD,IAAI,CAAClD,IAAL,CAAU,IAAV,EAAgB6I,IAAhB,CAAP;AACD;;AAEDD,MAAAA,MAAM,CAACE,YAAP,GAAsB,EAAtB;AACA,UAAI5I,IAAJ,EAAUyI,EAAE,CAACzI,IAAD,CAAF;AACX,KAXD,EAWG,KAAKb,KAAL,CAAW0J,KAXd;AAYD,GAlBD;;AAoBAxF,EAAAA,MAAM,CAACO,WAAP,GAAqB,SAASA,WAAT,CAAqBL,aAArB,EAAoC;AACvD,SAAKvE,MAAL,CAAY,EAAZ,EAAgBuE,aAAhB,EAA+B,OAA/B;AACD,GAFD;;AAIAF,EAAAA,MAAM,CAACrE,MAAP,GAAgB,SAASA,MAAT,CAAgBqD,UAAhB,EAA4BkB,aAA5B,EAA2CuF,MAA3C,EAAmD;AACjE,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AACrBA,MAAAA,MAAM,GAAG,OAAT;AACD;;AAED,QAAIC,YAAY,GAAG,KAAK5J,KAAxB;AAAA,QACI6J,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,QAEIC,cAAc,GAAGF,YAAY,CAAC1G,UAFlC;AAGA,QAAIA,UAAU,KAAK4G,cAAnB,EAAmC,CAAC,GAAG5O,cAAc,CAACsJ,MAAnB,EAA2BqF,QAA3B,EAAqC,CAAC3G,UAAD,EAAa;AACnFyG,MAAAA,MAAM,EAAEA,MAD2E;AAEnFG,MAAAA,cAAc,EAAEA,cAFmE;AAGnF1F,MAAAA,aAAa,EAAEA;AAHoE,KAAb,CAArC;AAKpC,GAbD;;AAeAF,EAAAA,MAAM,CAACpC,IAAP,GAAc,SAASA,IAAT,GAAgB;AAC5B,QAAI,CAAC,KAAK9B,KAAL,CAAW8B,IAAhB,EAAsB,CAAC,GAAG5G,cAAc,CAACsJ,MAAnB,EAA2B,KAAKxE,KAAL,CAAW+J,QAAtC,EAAgD,IAAhD;AACvB,GAFD;;AAIA7F,EAAAA,MAAM,CAACxE,KAAP,GAAe,SAASA,KAAT,GAAiB;AAC9B,QAAI,KAAKM,KAAL,CAAW8B,IAAf,EAAqB,CAAC,GAAG5G,cAAc,CAACsJ,MAAnB,EAA2B,KAAKxE,KAAL,CAAW+J,QAAtC,EAAgD,KAAhD;AACtB,GAFD;;AAIA7F,EAAAA,MAAM,CAAC8F,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,SAAKhK,KAAL,CAAW8B,IAAX,GAAkB,KAAKpC,KAAL,EAAlB,GAAiC,KAAKoC,IAAL,EAAjC;AACD,GAFD;;AAIAoC,EAAAA,MAAM,CAACmC,WAAP,GAAqB,SAASA,WAAT,GAAuB;AAC1C,QAAI4D,YAAY,GAAG,KAAKjK,KAAxB;AAAA,QACIkD,UAAU,GAAG+G,YAAY,CAAC/G,UAD9B;AAAA,QAEIgH,QAAQ,GAAGD,YAAY,CAACC,QAF5B;AAAA,QAGI7D,WAAW,GAAG4D,YAAY,CAAC5D,WAH/B;AAIA,WAAO,CAAC,EAAE6D,QAAQ,KAAK7D,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,UAAhB,IAA8BnD,UAA3D,CAAR,IAAkF,CAAC,KAAKiH,cAAL,EAArF,CAAR;AACD,GAND;;AAQAjG,EAAAA,MAAM,CAACiG,cAAP,GAAwB,SAASA,cAAT,GAA0B;AAChD,QAAIC,YAAY,GAAG,KAAKpK,KAAxB;AAAA,QACIkD,UAAU,GAAGkH,YAAY,CAAClH,UAD9B;AAAA,QAEIE,aAAa,GAAGgH,YAAY,CAAChH,aAFjC;AAAA,QAGIvB,MAAM,GAAGuI,YAAY,CAACvI,MAH1B;AAIA,QAAIwI,YAAY,GAAG,KAAKxH,KAAxB;AAAA,QACI9C,IAAI,GAAGsK,YAAY,CAACtK,IADxB;AAAA,QAEIuD,SAAS,GAAG+G,YAAY,CAAC/G,SAF7B;;AAIA,QAAIgH,KAAK,GAAG,SAASA,KAAT,CAAe1G,IAAf,EAAqB;AAC/B,aAAOR,aAAa,GAAGQ,IAAH,GAAUA,IAAI,CAAC1D,WAAL,EAA9B;AACD,KAFD,CATgD,CAW7C;;;AAGH,WAAO2B,MAAM,IAAI9B,IAAI,CAACwK,IAAL,CAAU,UAAUC,CAAV,EAAa;AACtC,aAAOF,KAAK,CAAChH,SAAS,CAACM,IAAV,CAAe4G,CAAf,CAAD,CAAL,KAA6BF,KAAK,CAACpH,UAAD,CAAzC;AACD,KAFgB,CAAjB;AAGD,GAjBD;;AAmBA,SAAOnE,YAAP;AACD,CArYD,CAqYExF,MAAM,CAACD,OAAP,CAAemR,SArYjB,CAF6E,EAuYhD7O,OAAO,CAAC8O,SAAR,GAAoBhO,QAAQ,CAAC,EAAD,EAAK/B,MAAM,CAAC+P,SAAZ,EAAuB;AAC9EjN,EAAAA,KAAK,EAAE9D,UAAU,CAACL,OAAX,CAAmBqR,GADoD;;AAG9E;;;;;;;;;;AAUArG,EAAAA,QAAQ,EAAE3K,UAAU,CAACL,OAAX,CAAmBsR,IAbiD;AAc9E9I,EAAAA,IAAI,EAAEnI,UAAU,CAACL,OAAX,CAAmBuR,IAdqD;AAe9Ed,EAAAA,QAAQ,EAAEpQ,UAAU,CAACL,OAAX,CAAmBsR,IAfiD;AAgB9E7K,EAAAA,IAAI,EAAEpG,UAAU,CAACL,OAAX,CAAmBwR,KAhBqD;AAiB9EC,EAAAA,UAAU,EAAElQ,eAAe,CAACmQ,QAjBkD;AAkB9ErH,EAAAA,SAAS,EAAE9I,eAAe,CAACmQ,QAlBmD;AAmB9E3E,EAAAA,WAAW,EAAE1M,UAAU,CAACL,OAAX,CAAmB2R,KAAnB,CAAyB,CAAC,IAAD,EAAO,KAAP,EAAc,UAAd,CAAzB,CAnBiE;;AAqB9E;;;;AAIA5D,EAAAA,cAAc,EAAExM,eAAe,CAACqQ,WAzB8C;AA0B9EpG,EAAAA,aAAa,EAAEjK,eAAe,CAACqQ,WA1B+C;AA2B9E9F,EAAAA,aAAa,EAAEvK,eAAe,CAACqQ,WA3B+C;AA4B9ErG,EAAAA,eAAe,EAAEhK,eAAe,CAACqQ,WA5B6C;AA6B9EnG,EAAAA,cAAc,EAAElK,eAAe,CAACqQ,WA7B8C;AA8B9EC,EAAAA,OAAO,EAAEtQ,eAAe,CAACmQ,QA9BqD;;AAgC9E;;;;AAIAhF,EAAAA,QAAQ,EAAErM,UAAU,CAACL,OAAX,CAAmBsR,IApCiD;AAqC9EV,EAAAA,QAAQ,EAAEvQ,UAAU,CAACL,OAAX,CAAmBsR,IArCiD;;AAuC9E;;;AAGAf,EAAAA,QAAQ,EAAElQ,UAAU,CAACL,OAAX,CAAmBsR,IA1CiD;AA2C9E1H,EAAAA,UAAU,EAAEvJ,UAAU,CAACL,OAAX,CAAmB8R,MA3C+C;AA4C9EtE,EAAAA,IAAI,EAAEnN,UAAU,CAACL,OAAX,CAAmBuR,IA5CqD;;AA8C9E;AACA3D,EAAAA,UAAU,EAAEvN,UAAU,CAACL,OAAX,CAAmB+R,IA/C+C;AAgD9EzG,EAAAA,UAAU,EAAEjL,UAAU,CAACL,OAAX,CAAmB+R,IAhD+C;;AAkD9E;AACAlE,EAAAA,WAAW,EAAExN,UAAU,CAACL,OAAX,CAAmB+R,IAnD8C;AAoD9E9F,EAAAA,WAAW,EAAE5L,UAAU,CAACL,OAAX,CAAmB8R,MApD8C;AAqD9ErE,EAAAA,MAAM,EAAEpN,UAAU,CAACL,OAAX,CAAmBuR,IArDmD;AAsD9EhE,EAAAA,eAAe,EAAEhM,eAAe,CAACqQ,WAtD6C;AAuD9E3D,EAAAA,QAAQ,EAAE1M,eAAe,CAAC0M,QAAhB,CAAyB+D,YAvD2C;AAwD9E9D,EAAAA,QAAQ,EAAE3M,eAAe,CAAC0M,QAxDoD;;AA0D9E;AACAH,EAAAA,kBAAkB,EAAEzN,UAAU,CAACL,OAAX,CAAmB8R,MA3DuC;AA4D9EnE,EAAAA,UAAU,EAAEtN,UAAU,CAACL,OAAX,CAAmBiS,MA5D+C;AA6D9EvG,EAAAA,SAAS,EAAErL,UAAU,CAACL,OAAX,CAAmBiS,MA7DgD;AA8D9EvE,EAAAA,KAAK,EAAErN,UAAU,CAACL,OAAX,CAAmBuR,IA9DoD;AA+D9E5H,EAAAA,QAAQ,EAAEtJ,UAAU,CAACL,OAAX,CAAmBkS,KAAnB,CAAyB;AACjC1J,IAAAA,IAAI,EAAEnI,UAAU,CAACL,OAAX,CAAmB8R,MADQ;AAEjCjF,IAAAA,SAAS,EAAEtL,eAAe,CAAC4Q,OAFM;AAGjCrF,IAAAA,WAAW,EAAEvL,eAAe,CAAC4Q,OAHI;AAIjCjG,IAAAA,iBAAiB,EAAE7L,UAAU,CAACL,OAAX,CAAmB8R,MAJL;AAKjC5E,IAAAA,YAAY,EAAE3L,eAAe,CAAC4Q;AALG,GAAzB;AA/DoE,CAAvB,CAvYoB,EA6czE7P,OAAO,CAAC8P,YAAR,GAAuB;AACzB3L,EAAAA,IAAI,EAAE,EADmB;AAEzB2J,EAAAA,KAAK,EAAE,GAFkB;AAGzBxG,EAAAA,UAAU,EAAE,EAHa;AAIzBmD,EAAAA,WAAW,EAAE,KAJY;AAKzBzB,EAAAA,UAAU,EAAExJ,KAAK,CAACyE,MALO;AAMzBqH,EAAAA,UAAU,EAAE9L,KAAK,CAACuQ,SANO;AAOzBvG,EAAAA,aAAa,EAAE/K,KAAK,CAACf;AAPI,CA7ckD,EAqd1EuC,KArdsE,CAAP,GAqdtDN,WAAW,GAAG6C,yBAAyB,CAAC9C,OAAO,CAACY,SAAT,EAAoB,cAApB,EAAoC,CAACjB,YAAY,CAAC2Q,cAAd,CAApC,EAAmE;AACpHtO,EAAAA,UAAU,EAAE,IADwG;AAEpHI,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,QAAImO,MAAM,GAAG,IAAb;;AAEA,WAAO,UAAUC,QAAV,EAAoB1H,aAApB,EAAmC;AACxC,UAAI0H,QAAQ,KAAKnN,SAAb,IAA0BmN,QAAQ,KAAKhN,aAA3C,EAA0D;AACxD+M,QAAAA,MAAM,CAACtF,YAAP,CAAoBsF,MAAM,CAAC7L,KAAP,CAAakD,UAAjC;;AAEA;AACD;;AAED,OAAC,GAAGhI,cAAc,CAACsJ,MAAnB,EAA2BqH,MAAM,CAAC7L,KAAP,CAAagG,QAAxC,EAAkD,CAAC8F,QAAD,EAAW;AAC3D1H,QAAAA,aAAa,EAAEA;AAD4C,OAAX,CAAlD;;AAIAyH,MAAAA,MAAM,CAAC1L,MAAP,CAAc2L,QAAd,EAAwB1H,aAAxB;;AAEAyH,MAAAA,MAAM,CAACnM,KAAP;;AAEAmM,MAAAA,MAAM,CAAClK,KAAP,CAAakK,MAAb;AACD,KAhBD;AAiBD;AAtBmH,CAAnE,CAAvC,EAuBRrQ,YAAY,GAAG4C,yBAAyB,CAAC9C,OAAO,CAACY,SAAT,EAAoB,cAApB,EAAoC,CAACjB,YAAY,CAAC2Q,cAAd,CAApC,EAAmE;AAC7GtO,EAAAA,UAAU,EAAE,IADiG;AAE7GI,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,QAAIqO,MAAM,GAAG,IAAb;;AAEA,WAAO,UAAU7I,UAAV,EAAsB8I,KAAtB,EAA6B;AAClC,UAAI9I,UAAU,KAAK,KAAK,CAAxB,EAA2B;AACzBA,QAAAA,UAAU,GAAG,EAAb;AACD;;AAED,OAAC,GAAGhI,cAAc,CAACsJ,MAAnB,EAA2BuH,MAAM,CAAC/L,KAAP,CAAakK,QAAxC,EAAkDhH,UAAlD;;AAEA6I,MAAAA,MAAM,CAACtH,WAAP,CAAmBuH,KAAnB;;AAEAD,MAAAA,MAAM,CAACrM,KAAP;;AAEAqM,MAAAA,MAAM,CAACpK,KAAP,CAAaoK,MAAb;AACD,KAZD;AAaD;AAlB4G,CAAnE,CAvBhC,EA0CRtQ,YAAY,GAAG2C,yBAAyB,CAAC9C,OAAO,CAACY,SAAT,EAAoB,aAApB,EAAmC,CAACjB,YAAY,CAAC2Q,cAAd,CAAnC,EAAkE;AAC5GtO,EAAAA,UAAU,EAAE,IADgG;AAE5GI,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,QAAIuO,MAAM,GAAG,IAAb;;AAEA,WAAO,UAAUrM,CAAV,EAAa;AAClBqM,MAAAA,MAAM,CAACtK,KAAP;;AAEAsK,MAAAA,MAAM,CAACjC,MAAP;;AAEA,OAAC,GAAG9O,cAAc,CAACsJ,MAAnB,EAA2ByH,MAAM,CAACjM,KAAP,CAAawI,OAAxC,EAAiD5I,CAAjD;AACD,KAND;AAOD;AAZ2G,CAAlE,CA1ChC,EAuDRlE,YAAY,GAAG0C,yBAAyB,CAAC9C,OAAO,CAACY,SAAT,EAAoB,eAApB,EAAqC,CAACjB,YAAY,CAAC2Q,cAAd,CAArC,EAAoE;AAC9GtO,EAAAA,UAAU,EAAE,IADkG;AAE9GI,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,QAAIwO,MAAM,GAAG,IAAb;;AAEA,WAAO,UAAUtM,CAAV,EAAa;AAClB,UAAI5D,GAAG,GAAG4D,CAAC,CAAC5D,GAAZ;AAAA,UACImQ,MAAM,GAAGvM,CAAC,CAACuM,MADf;AAAA,UAEIC,OAAO,GAAGxM,CAAC,CAACwM,OAFhB;AAGA,UAAIC,YAAY,GAAGH,MAAM,CAAClM,KAA1B;AAAA,UACI8B,IAAI,GAAGuK,YAAY,CAACvK,IADxB;AAAA,UAEIsG,SAAS,GAAGiE,YAAY,CAACjE,SAF7B;AAAA,UAGIvG,MAAM,GAAGwK,YAAY,CAACxK,MAH1B;AAAA,UAIIqB,UAAU,GAAGmJ,YAAY,CAACnJ,UAJ9B;AAKA,UAAIoJ,YAAY,GAAGJ,MAAM,CAACrJ,KAA1B;AAAA,UACIQ,WAAW,GAAGiJ,YAAY,CAACjJ,WAD/B;AAAA,UAEIS,YAAY,GAAGwI,YAAY,CAACxI,YAFhC;AAAA,UAGID,IAAI,GAAGyI,YAAY,CAACzI,IAHxB;AAIA,UAAI0I,eAAe,GAAGlJ,WAAW,KAAKvE,aAAtC;;AAEA,UAAI0N,SAAS,GAAGN,MAAM,CAAC7F,WAAP,EAAhB;;AAEA,OAAC,GAAGnL,cAAc,CAACsJ,MAAnB,EAA2B4D,SAA3B,EAAsC,CAACxI,CAAD,CAAtC;;AAEA,UAAI6M,cAAc,GAAG,SAASA,cAAT,GAA0B;AAC7CP,QAAAA,MAAM,CAACxM,KAAP;;AAEA,SAAC,GAAGhG,SAAS,CAACsI,WAAd,EAA2BkK,MAA3B,EAAmCvK,KAAnC;AACD,OAJD;;AAMA,UAAIxB,MAAM,GAAG,SAASA,MAAT,CAAgBU,IAAhB,EAAsB;AACjC,eAAOA,IAAI,IAAI,IAAR,IAAgBqL,MAAM,CAAC/L,MAAP,CAAcU,IAAd,EAAoBjB,CAApB,CAAvB;AACD,OAFD;;AAIA,UAAI8M,SAAS,GAAG,SAASA,SAAT,CAAmB7L,IAAnB,EAAyB;AACvC,eAAOqL,MAAM,CAAC/K,QAAP,CAAgB;AACrBkC,UAAAA,WAAW,EAAExC;AADQ,SAAhB,CAAP;AAGD,OAJD;;AAMA,UAAIjB,CAAC,CAAC+M,gBAAN,EAAwB;;AAExB,UAAI3Q,GAAG,KAAK,KAAZ,EAAmB;AACjB4D,QAAAA,CAAC,CAACgN,cAAF;AACA,YAAI9K,IAAJ,EAAU4K,SAAS,CAAC7I,IAAI,CAACgJ,IAAL,EAAD,CAAT,CAAV,KAAsC1M,MAAM,CAAC0D,IAAI,CAACgJ,IAAL,EAAD,CAAN;AACvC,OAHD,MAGO,IAAI7Q,GAAG,KAAK,MAAZ,EAAoB;AACzB4D,QAAAA,CAAC,CAACgN,cAAF;AACA,YAAI9K,IAAJ,EAAU4K,SAAS,CAAC7I,IAAI,CAACiJ,KAAL,EAAD,CAAT,CAAV,KAAuC3M,MAAM,CAAC0D,IAAI,CAACiJ,KAAL,EAAD,CAAN;AACxC,OAHM,MAGA,IAAI9Q,GAAG,KAAK,QAAR,IAAoB8F,IAAxB,EAA8B;AACnClC,QAAAA,CAAC,CAACgN,cAAF;AACAH,QAAAA,cAAc;AACf,OAHM,MAGA,IAAIzQ,GAAG,KAAK,OAAR,IAAmB8F,IAAnB,IAA2BsK,OAA3B,IAAsCI,SAA1C,EAAqD;AAC1D5M,QAAAA,CAAC,CAACgN,cAAF;;AAEAV,QAAAA,MAAM,CAAC3F,YAAP,CAAoBrD,UAApB,EAAgCtD,CAAhC;AACD,OAJM,MAIA,IAAI,CAAC5D,GAAG,KAAK,OAAR,IAAmBA,GAAG,KAAK,GAAR,IAAe,CAAC6F,MAApC,KAA+CC,IAAnD,EAAyD;AAC9DlC,QAAAA,CAAC,CAACgN,cAAF;;AAEAV,QAAAA,MAAM,CAACjG,YAAP,CAAoB5C,WAApB,EAAiCzD,CAAjC;AACD,OAJM,MAIA,IAAI5D,GAAG,KAAK,GAAR,IAAe,CAAC8F,IAApB,EAA0B;AAC/BlC,QAAAA,CAAC,CAACgN,cAAF;;AAEAV,QAAAA,MAAM,CAACpK,IAAP;AACD,OAJM,MAIA,IAAI9F,GAAG,KAAK,WAAZ,EAAyB;AAC9B4D,QAAAA,CAAC,CAACgN,cAAF;AACA,YAAIT,MAAJ,EAAY,OAAOD,MAAM,CAACpK,IAAP,EAAP;AACZ,YAAI,CAACA,IAAL,EAAW3B,MAAM,CAAC0D,IAAI,CAAClD,IAAL,CAAUmD,YAAV,CAAD,CAAN;AACX,YAAInD,IAAI,GAAGkD,IAAI,CAAClD,IAAL,CAAU0C,WAAV,CAAX;AACA,YAAI0J,QAAQ,GAAGR,eAAe,IAAIC,SAAS,IAAInJ,WAAW,KAAK1C,IAA/D;AACA+L,QAAAA,SAAS,CAACK,QAAQ,GAAGjO,aAAH,GAAmB6B,IAA5B,CAAT;AACD,OAPM,MAOA,IAAI3E,GAAG,KAAK,SAAZ,EAAuB;AAC5B4D,QAAAA,CAAC,CAACgN,cAAF;AACA,YAAIT,MAAJ,EAAY,OAAOM,cAAc,EAArB;AACZ,YAAI,CAAC3K,IAAL,EAAW,OAAO3B,MAAM,CAAC0D,IAAI,CAACmJ,IAAL,CAAUlJ,YAAV,CAAD,CAAb;AACX4I,QAAAA,SAAS,CAACH,eAAe,GAAG1I,IAAI,CAACgJ,IAAL,EAAH,GAAiBhJ,IAAI,CAACmJ,IAAL,CAAU3J,WAAV,CAAjC,CAAT;AACD;AACF,KAvED;AAwED;AA7E6G,CAApE,CAvDhC,EAqIR1H,YAAY,GAAGyC,yBAAyB,CAAC9C,OAAO,CAACY,SAAT,EAAoB,gBAApB,EAAsC,CAACjB,YAAY,CAAC2Q,cAAd,CAAtC,EAAqE;AAC/GtO,EAAAA,UAAU,EAAE,IADmG;AAE/GI,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,QAAIuP,MAAM,GAAG,IAAb;;AAEA,WAAO,UAAUrN,CAAV,EAAa;AAClB,OAAC,GAAG1E,cAAc,CAACsJ,MAAnB,EAA2ByI,MAAM,CAACjN,KAAP,CAAasI,UAAxC,EAAoD,CAAC1I,CAAD,CAApD;AACA,UAAIA,CAAC,CAAC+M,gBAAN,EAAwB;AACxB,UAAI,EAAEM,MAAM,CAACjN,KAAP,CAAa6B,MAAb,IAAuBoL,MAAM,CAACjN,KAAP,CAAa8B,IAAtC,CAAJ,EAAiDmL,MAAM,CAAC7D,UAAP,CAAkBrI,MAAM,CAACmM,YAAP,CAAoBtN,CAAC,CAACuN,KAAtB,CAAlB,EAAgD,UAAUtM,IAAV,EAAgB;AAC/GoM,QAAAA,MAAM,CAAC3K,OAAP,MAAoB2K,MAAM,CAACjN,KAAP,CAAa8B,IAAjC,GAAwCmL,MAAM,CAAC9L,QAAP,CAAgB;AACtDkC,UAAAA,WAAW,EAAExC;AADyC,SAAhB,CAAxC,GAEKA,IAAI,IAAIoM,MAAM,CAAC9M,MAAP,CAAcU,IAAd,EAAoBjB,CAApB,CAFb;AAGD,OAJgD;AAKlD,KARD;AASD;AAd8G,CAArE,CA1lBsB,GAymB7DtE,OAzmByD,CAA3C,KAymBDD,MAzmBlB;;AA2mBA,IAAI+R,QAAQ,GAAG,CAAC,GAAGpT,eAAe,CAACV,OAApB,EAA6ByF,YAA7B,EAA2C;AACxD+C,EAAAA,IAAI,EAAE,UADkD;AAExDrE,EAAAA,KAAK,EAAE,UAFiD;AAGxDyF,EAAAA,UAAU,EAAE;AAH4C,CAA3C,EAIZ,CAAC,OAAD,CAJY,CAAf;;AAMA9J,OAAO,CAACE,OAAR,GAAkB8T,QAAlB;AACAC,MAAM,CAACjU,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _activeElement = _interopRequireDefault(require(\"dom-helpers/activeElement\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _reactComponentManagers = require(\"react-component-managers\");\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _uncontrollable = _interopRequireDefault(require(\"uncontrollable\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _AddToListOption = _interopRequireDefault(require(\"./AddToListOption\"));\n\nvar _DropdownListInput = _interopRequireDefault(require(\"./DropdownListInput\"));\n\nvar _messages = require(\"./messages\");\n\nvar Props = _interopRequireWildcard(require(\"./util/Props\"));\n\nvar Filter = _interopRequireWildcard(require(\"./util/Filter\"));\n\nvar _focusManager = _interopRequireDefault(require(\"./util/focusManager\"));\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./util/PropTypes\"));\n\nvar _reduceToListState = _interopRequireDefault(require(\"./util/reduceToListState\"));\n\nvar _getAccessors = _interopRequireDefault(require(\"./util/getAccessors\"));\n\nvar _scrollManager = _interopRequireDefault(require(\"./util/scrollManager\"));\n\nvar _interaction = require(\"./util/interaction\");\n\nvar _widgetHelpers = require(\"./util/widgetHelpers\");\n\nvar _dataHelpers = require(\"./util/dataHelpers\");\n\nvar _Icon = require(\"./Icon\");\n\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _class3, _temp;\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object['ke' + 'ys'](descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object['define' + 'Property'](target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and set to use loose mode. ' + 'To use proposal-class-properties in spec mode with decorators, wait for ' + 'the next major version of decorators in stage 2.'); }\n\nvar CREATE_OPTION = {};\n/**\n * ---\n * shortcuts:\n *   - { key: alt + down arrow, label: open dropdown }\n *   - { key: alt + up arrow, label: close dropdown }\n *   - { key: down arrow, label: move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: ctrl + enter, label: create new option from current searchTerm }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * A `<select>` replacement for single value lists.\n * @public\n */\n\nvar DropdownList = (0, _reactLifecyclesCompat.polyfill)(_class = (_class2 = (_temp = _class3 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DropdownList, _React$Component);\n\n  function DropdownList() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleFocusChanged = function (focused) {\n      if (!focused) _this.close();\n    };\n\n    _initializerDefineProperty(_this, \"handleSelect\", _descriptor, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleCreate\", _descriptor2, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleClick\", _descriptor3, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleKeyDown\", _descriptor4, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _initializerDefineProperty(_this, \"handleKeyPress\", _descriptor5, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.handleInputChange = function (e) {\n      _this.search(e.target.value, e, 'input');\n    };\n\n    _this.handleAutofillChange = function (e) {\n      var data = _this.props.data;\n      var filledValue = e.target.value.toLowerCase();\n      if (filledValue === '') return void _this.change(null);\n\n      for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var item = _ref;\n        var value = (0, _dataHelpers.dataValue)(item);\n\n        if (String(value).toLowerCase() === filledValue || (0, _dataHelpers.dataText)(item).toLowerCase() === filledValue) {\n          _this.change(item, e);\n\n          break;\n        }\n      }\n    };\n\n    _this.handleAutofill = function (autofilling) {\n      _this.setState({\n        autofilling: autofilling\n      });\n    };\n\n    _this.attachInputRef = function (ref) {\n      return _this.inputRef = ref;\n    };\n\n    _this.attachFilterRef = function (ref) {\n      return _this.filterRef = ref;\n    };\n\n    _this.attachListRef = function (ref) {\n      return _this.listRef = ref;\n    };\n\n    _this.focus = function (target) {\n      var _this$props = _this.props,\n          filter = _this$props.filter,\n          open = _this$props.open;\n      var inst = target || (filter && open ? _this.filterRef : _this.inputRef);\n      inst = (0, _reactDom.findDOMNode)(inst);\n      if (inst && (0, _activeElement.default)() !== inst) inst.focus();\n    };\n\n    (0, _reactComponentManagers.autoFocus)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.inputId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_input');\n    _this.listId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_listbox');\n    _this.activeId = (0, _widgetHelpers.instanceId)(_assertThisInitialized(_assertThisInitialized(_this)), '_listbox_active_option');\n    _this.mounted = (0, _reactComponentManagers.mountManager)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.timeouts = (0, _reactComponentManagers.timeoutManager)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleScroll = (0, _scrollManager.default)(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.focusManager = (0, _focusManager.default)(_assertThisInitialized(_assertThisInitialized(_this)), {\n      didHandle: _this.handleFocusChanged\n    });\n    _this.state = {};\n    return _this;\n  }\n\n  DropdownList.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var open = nextProps.open,\n        value = nextProps.value,\n        data = nextProps.data,\n        messages = nextProps.messages,\n        searchTerm = nextProps.searchTerm,\n        filter = nextProps.filter,\n        minLength = nextProps.minLength,\n        caseSensitive = nextProps.caseSensitive;\n    var focusedItem = prevState.focusedItem;\n    var accessors = (0, _getAccessors.default)(nextProps);\n    var valueChanged = value !== prevState.lastValue;\n    var initialIdx = valueChanged && accessors.indexOf(data, value);\n    if (open) data = Filter.filter(data, {\n      filter: filter,\n      searchTerm: searchTerm,\n      minLength: minLength,\n      caseSensitive: caseSensitive,\n      textField: accessors.text\n    });\n    var list = (0, _reduceToListState.default)(data, prevState.list, {\n      nextProps: nextProps\n    });\n    var selectedItem = data[initialIdx];\n    var nextFocusedItem = ~data.indexOf(focusedItem) ? focusedItem : data[0];\n    return {\n      data: data,\n      list: list,\n      accessors: accessors,\n      lastValue: value,\n      messages: (0, _messages.getMessages)(messages),\n      selectedItem: valueChanged ? list.nextEnabled(selectedItem) : prevState.selectedItem,\n      focusedItem: valueChanged || focusedItem === undefined ? list.nextEnabled(selectedItem !== undefined ? selectedItem : nextFocusedItem) : nextFocusedItem\n    };\n  };\n\n  var _proto = DropdownList.prototype;\n\n  _proto.change = function change(nextValue, originalEvent) {\n    var _this$props2 = this.props,\n        onChange = _this$props2.onChange,\n        searchTerm = _this$props2.searchTerm,\n        lastValue = _this$props2.value;\n\n    if (!this.state.accessors.matches(nextValue, lastValue)) {\n      (0, _widgetHelpers.notify)(onChange, [nextValue, {\n        originalEvent: originalEvent,\n        lastValue: lastValue,\n        searchTerm: searchTerm\n      }]);\n      this.clearSearch(originalEvent);\n      this.close();\n    }\n  };\n\n  _proto.renderList = function renderList() {\n    var _this$props3 = this.props,\n        open = _this$props3.open,\n        filter = _this$props3.filter,\n        data = _this$props3.data,\n        searchTerm = _this$props3.searchTerm,\n        searchIcon = _this$props3.searchIcon,\n        optionComponent = _this$props3.optionComponent,\n        itemComponent = _this$props3.itemComponent,\n        groupComponent = _this$props3.groupComponent,\n        listProps = _this$props3.listProps;\n    var _this$state = this.state,\n        list = _this$state.list,\n        accessors = _this$state.accessors,\n        focusedItem = _this$state.focusedItem,\n        selectedItem = _this$state.selectedItem,\n        messages = _this$state.messages,\n        filteredData = _this$state.data;\n    var List = this.props.listComponent;\n    return _react.default.createElement(\"div\", null, filter && _react.default.createElement(_WidgetPicker.default, {\n      className: \"rw-filter-input rw-input\"\n    }, _react.default.createElement(\"input\", {\n      value: searchTerm,\n      className: \"rw-input-reset\",\n      onChange: this.handleInputChange,\n      placeholder: messages.filterPlaceholder(this.props),\n      ref: this.attachFilterRef\n    }), _react.default.createElement(_Select.default, {\n      icon: searchIcon,\n      role: \"presentation\",\n      \"aria-hidden\": \"true\"\n    })), _react.default.createElement(List, _extends({}, listProps, {\n      id: this.listId,\n      activeId: this.activeId,\n      data: filteredData,\n      dataState: list.dataState,\n      isDisabled: list.isDisabled,\n      searchTerm: searchTerm,\n      textAccessor: accessors.text,\n      valueAccessor: accessors.value,\n      itemComponent: itemComponent,\n      groupComponent: groupComponent,\n      optionComponent: optionComponent,\n      selectedItem: selectedItem,\n      focusedItem: open ? focusedItem : null,\n      onSelect: this.handleSelect,\n      onMove: this.handleScroll,\n      \"aria-live\": open && 'polite',\n      \"aria-labelledby\": this.inputId,\n      \"aria-hidden\": !this.props.open,\n      ref: this.attachListRef,\n      messages: {\n        emptyList: data.length ? messages.emptyFilter : messages.emptyList\n      }\n    })), this.allowCreate() && _react.default.createElement(_AddToListOption.default, {\n      id: this.createId,\n      searchTerm: searchTerm,\n      onSelect: this.handleCreate,\n      focused: !focusedItem || focusedItem === CREATE_OPTION\n    }, messages.createOption(this.props)));\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        className = _this$props4.className,\n        tabIndex = _this$props4.tabIndex,\n        popupTransition = _this$props4.popupTransition,\n        textField = _this$props4.textField,\n        data = _this$props4.data,\n        busy = _this$props4.busy,\n        dropUp = _this$props4.dropUp,\n        placeholder = _this$props4.placeholder,\n        value = _this$props4.value,\n        open = _this$props4.open,\n        isRtl = _this$props4.isRtl,\n        filter = _this$props4.filter,\n        inputProps = _this$props4.inputProps,\n        selectIcon = _this$props4.selectIcon,\n        busySpinner = _this$props4.busySpinner,\n        containerClassName = _this$props4.containerClassName,\n        valueComponent = _this$props4.valueComponent;\n    var _this$state2 = this.state,\n        focused = _this$state2.focused,\n        accessors = _this$state2.accessors,\n        messages = _this$state2.messages,\n        autofilling = _this$state2.autofilling;\n    var disabled = this.props.disabled === true;\n    var readOnly = this.props.readOnly === true;\n    var valueItem = accessors.findOrSelf(data, value);\n    var shouldRenderPopup = (0, _widgetHelpers.isFirstFocusedRender)(this);\n\n    var elementProps = _extends(Props.pickElementProps(this), {\n      name: undefined,\n      role: 'combobox',\n      id: this.inputId,\n      tabIndex: open && filter ? -1 : tabIndex || 0,\n      'aria-owns': this.listId,\n      'aria-activedescendant': open ? this.activeId : null,\n      'aria-expanded': !!open,\n      'aria-haspopup': true,\n      'aria-busy': !!busy,\n      'aria-live': !open && 'polite',\n      'aria-autocomplete': 'list',\n      'aria-disabled': disabled,\n      'aria-readonly': readOnly\n    });\n\n    return _react.default.createElement(_Widget.default, _extends({}, elementProps, {\n      open: open,\n      isRtl: isRtl,\n      dropUp: dropUp,\n      focused: focused,\n      disabled: disabled,\n      readOnly: readOnly,\n      autofilling: autofilling,\n      onBlur: this.focusManager.handleBlur,\n      onFocus: this.focusManager.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      className: (0, _classnames.default)(className, 'rw-dropdown-list'),\n      ref: this.attachInputRef\n    }), _react.default.createElement(_WidgetPicker.default, {\n      onClick: this.handleClick,\n      className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n    }, _react.default.createElement(_DropdownListInput.default, _extends({}, inputProps, {\n      value: valueItem,\n      textField: textField,\n      name: this.props.name,\n      autoComplete: this.props.autoComplete,\n      onAutofill: this.handleAutofill,\n      onAutofillChange: this.handleAutofillChange,\n      placeholder: placeholder,\n      valueComponent: valueComponent\n    })), _react.default.createElement(_Select.default, {\n      busy: busy,\n      icon: selectIcon,\n      spinner: busySpinner,\n      role: \"presentational\",\n      \"aria-hidden\": \"true\",\n      disabled: disabled || readOnly,\n      label: messages.openDropdown(this.props)\n    })), shouldRenderPopup && _react.default.createElement(_Popup.default, {\n      open: open,\n      dropUp: dropUp,\n      transition: popupTransition,\n      onEntered: function onEntered() {\n        return _this2.focus();\n      },\n      onEntering: function onEntering() {\n        return _this2.listRef.forceUpdate();\n      }\n    }, this.renderList(messages)));\n  };\n\n  _proto.findOption = function findOption(character, cb) {\n    var _this3 = this;\n\n    var word = ((this._currentWord || '') + character).toLowerCase();\n    if (!character) return;\n    this._currentWord = word;\n    this.timeouts.set('search', function () {\n      var list = _this3.state.list;\n      var key = _this3.props.open ? 'focusedItem' : 'selectedItem';\n      var item = list.next(_this3.state[key], word);\n\n      if (item === _this3.state[key]) {\n        item = list.next(null, word);\n      }\n\n      _this3._currentWord = '';\n      if (item) cb(item);\n    }, this.props.delay);\n  };\n\n  _proto.clearSearch = function clearSearch(originalEvent) {\n    this.search('', originalEvent, 'clear');\n  };\n\n  _proto.search = function search(searchTerm, originalEvent, action) {\n    if (action === void 0) {\n      action = 'input';\n    }\n\n    var _this$props5 = this.props,\n        onSearch = _this$props5.onSearch,\n        lastSearchTerm = _this$props5.searchTerm;\n    if (searchTerm !== lastSearchTerm) (0, _widgetHelpers.notify)(onSearch, [searchTerm, {\n      action: action,\n      lastSearchTerm: lastSearchTerm,\n      originalEvent: originalEvent\n    }]);\n  };\n\n  _proto.open = function open() {\n    if (!this.props.open) (0, _widgetHelpers.notify)(this.props.onToggle, true);\n  };\n\n  _proto.close = function close() {\n    if (this.props.open) (0, _widgetHelpers.notify)(this.props.onToggle, false);\n  };\n\n  _proto.toggle = function toggle() {\n    this.props.open ? this.close() : this.open();\n  };\n\n  _proto.allowCreate = function allowCreate() {\n    var _this$props6 = this.props,\n        searchTerm = _this$props6.searchTerm,\n        onCreate = _this$props6.onCreate,\n        allowCreate = _this$props6.allowCreate;\n    return !!(onCreate && (allowCreate === true || allowCreate === 'onFilter' && searchTerm) && !this.hasExtactMatch());\n  };\n\n  _proto.hasExtactMatch = function hasExtactMatch() {\n    var _this$props7 = this.props,\n        searchTerm = _this$props7.searchTerm,\n        caseSensitive = _this$props7.caseSensitive,\n        filter = _this$props7.filter;\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        accessors = _this$state3.accessors;\n\n    var lower = function lower(text) {\n      return caseSensitive ? text : text.toLowerCase();\n    }; // if there is an exact match on textFields:\n\n\n    return filter && data.some(function (v) {\n      return lower(accessors.text(v)) === lower(searchTerm);\n    });\n  };\n\n  return DropdownList;\n}(_react.default.Component), _class3.propTypes = _extends({}, Filter.propTypes, {\n  value: _propTypes.default.any,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any,\n   *  metadata: {\n   *    lastValue: ?any,\n   *    searchTerm: ?string\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  onToggle: _propTypes.default.func,\n  data: _propTypes.default.array,\n  valueField: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   * A React component for customizing the rendering of the DropdownList\n   * value\n   */\n  valueComponent: CustomPropTypes.elementType,\n  itemComponent: CustomPropTypes.elementType,\n  listComponent: CustomPropTypes.elementType,\n  optionComponent: CustomPropTypes.elementType,\n  groupComponent: CustomPropTypes.elementType,\n  groupBy: CustomPropTypes.accessor,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: _propTypes.default.func,\n  onCreate: _propTypes.default.func,\n\n  /**\n   * @type function(searchTerm: string, metadata: { action, lastSearchTerm, originalEvent? })\n   */\n  onSearch: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n  searchIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  placeholder: _propTypes.default.string,\n  dropUp: _propTypes.default.bool,\n  popupTransition: CustomPropTypes.elementType,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  isRtl: _propTypes.default.bool,\n  messages: _propTypes.default.shape({\n    open: _propTypes.default.string,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    filterPlaceholder: _propTypes.default.string,\n    createOption: CustomPropTypes.message\n  })\n}), _class3.defaultProps = {\n  data: [],\n  delay: 500,\n  searchTerm: '',\n  allowCreate: false,\n  searchIcon: _Icon.search,\n  selectIcon: _Icon.caretDown,\n  listComponent: _List.default\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"handleSelect\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this4 = this;\n\n    return function (dataItem, originalEvent) {\n      if (dataItem === undefined || dataItem === CREATE_OPTION) {\n        _this4.handleCreate(_this4.props.searchTerm);\n\n        return;\n      }\n\n      (0, _widgetHelpers.notify)(_this4.props.onSelect, [dataItem, {\n        originalEvent: originalEvent\n      }]);\n\n      _this4.change(dataItem, originalEvent);\n\n      _this4.close();\n\n      _this4.focus(_this4);\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"handleCreate\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this5 = this;\n\n    return function (searchTerm, event) {\n      if (searchTerm === void 0) {\n        searchTerm = '';\n      }\n\n      (0, _widgetHelpers.notify)(_this5.props.onCreate, searchTerm);\n\n      _this5.clearSearch(event);\n\n      _this5.close();\n\n      _this5.focus(_this5);\n    };\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"handleClick\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this6 = this;\n\n    return function (e) {\n      _this6.focus();\n\n      _this6.toggle();\n\n      (0, _widgetHelpers.notify)(_this6.props.onClick, e);\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"handleKeyDown\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this7 = this;\n\n    return function (e) {\n      var key = e.key,\n          altKey = e.altKey,\n          ctrlKey = e.ctrlKey;\n      var _this7$props = _this7.props,\n          open = _this7$props.open,\n          onKeyDown = _this7$props.onKeyDown,\n          filter = _this7$props.filter,\n          searchTerm = _this7$props.searchTerm;\n      var _this7$state = _this7.state,\n          focusedItem = _this7$state.focusedItem,\n          selectedItem = _this7$state.selectedItem,\n          list = _this7$state.list;\n      var createIsFocused = focusedItem === CREATE_OPTION;\n\n      var canCreate = _this7.allowCreate();\n\n      (0, _widgetHelpers.notify)(onKeyDown, [e]);\n\n      var closeWithFocus = function closeWithFocus() {\n        _this7.close();\n\n        (0, _reactDom.findDOMNode)(_this7).focus();\n      };\n\n      var change = function change(item) {\n        return item != null && _this7.change(item, e);\n      };\n\n      var focusItem = function focusItem(item) {\n        return _this7.setState({\n          focusedItem: item\n        });\n      };\n\n      if (e.defaultPrevented) return;\n\n      if (key === 'End') {\n        e.preventDefault();\n        if (open) focusItem(list.last());else change(list.last());\n      } else if (key === 'Home') {\n        e.preventDefault();\n        if (open) focusItem(list.first());else change(list.first());\n      } else if (key === 'Escape' && open) {\n        e.preventDefault();\n        closeWithFocus();\n      } else if (key === 'Enter' && open && ctrlKey && canCreate) {\n        e.preventDefault();\n\n        _this7.handleCreate(searchTerm, e);\n      } else if ((key === 'Enter' || key === ' ' && !filter) && open) {\n        e.preventDefault();\n\n        _this7.handleSelect(focusedItem, e);\n      } else if (key === ' ' && !open) {\n        e.preventDefault();\n\n        _this7.open();\n      } else if (key === 'ArrowDown') {\n        e.preventDefault();\n        if (altKey) return _this7.open();\n        if (!open) change(list.next(selectedItem));\n        var next = list.next(focusedItem);\n        var creating = createIsFocused || canCreate && focusedItem === next;\n        focusItem(creating ? CREATE_OPTION : next);\n      } else if (key === 'ArrowUp') {\n        e.preventDefault();\n        if (altKey) return closeWithFocus();\n        if (!open) return change(list.prev(selectedItem));\n        focusItem(createIsFocused ? list.last() : list.prev(focusedItem));\n      }\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"handleKeyPress\", [_interaction.widgetEditable], {\n  enumerable: true,\n  initializer: function initializer() {\n    var _this8 = this;\n\n    return function (e) {\n      (0, _widgetHelpers.notify)(_this8.props.onKeyPress, [e]);\n      if (e.defaultPrevented) return;\n      if (!(_this8.props.filter && _this8.props.open)) _this8.findOption(String.fromCharCode(e.which), function (item) {\n        _this8.mounted() && _this8.props.open ? _this8.setState({\n          focusedItem: item\n        }) : item && _this8.change(item, e);\n      });\n    };\n  }\n})), _class2)) || _class;\n\nvar _default = (0, _uncontrollable.default)(DropdownList, {\n  open: 'onToggle',\n  value: 'onChange',\n  searchTerm: 'onSearch'\n}, ['focus']);\n\nexports.default = _default;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}