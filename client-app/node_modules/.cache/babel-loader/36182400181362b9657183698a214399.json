{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v22.1.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Constants } from \"../../constants\";\nimport { PopupComponent } from \"../../widgets/popupComponent\";\nimport { _ } from '../../utils';\n\nvar TextCellEditor =\n/** @class */\nfunction (_super) {\n  __extends(TextCellEditor, _super);\n\n  function TextCellEditor() {\n    var _this = _super.call(this, TextCellEditor.TEMPLATE) || this;\n\n    _this.eInput = _this.getGui().querySelector('input');\n    return _this;\n  }\n\n  TextCellEditor.prototype.init = function (params) {\n    this.params = params;\n    var eInput = this.eInput;\n    var startValue; // cellStartedEdit is only false if we are doing fullRow editing\n\n    if (params.cellStartedEdit) {\n      this.focusAfterAttached = true;\n      var keyPressBackspaceOrDelete = params.keyPress === Constants.KEY_BACKSPACE || params.keyPress === Constants.KEY_DELETE;\n\n      if (keyPressBackspaceOrDelete) {\n        startValue = '';\n      } else if (params.charPress) {\n        startValue = params.charPress;\n      } else {\n        startValue = this.getStartValue(params);\n\n        if (params.keyPress !== Constants.KEY_F2) {\n          this.highlightAllOnFocus = true;\n        }\n      }\n    } else {\n      this.focusAfterAttached = false;\n      startValue = this.getStartValue(params);\n    }\n\n    if (_.exists(startValue)) {\n      eInput.value = startValue;\n    }\n\n    this.addDestroyableEventListener(eInput, 'keydown', function (event) {\n      var pageUp = event.keyCode === Constants.KEY_PAGE_UP;\n      var pageDown = event.keyCode === Constants.KEY_PAGE_DOWN;\n\n      if (pageUp || pageDown) {\n        event.preventDefault();\n      }\n    });\n  };\n\n  TextCellEditor.prototype.afterGuiAttached = function () {\n    if (!this.focusAfterAttached) {\n      return;\n    }\n\n    var eInput = this.eInput; // Added for AG-3238. We can't remove this explicit focus() because Chrome requires an input\n    // to be focussed before setSelectionRange will work. But it triggers a bug in Safari where\n    // explicitly focussing then blurring an empty field will cause the parent container to scroll.\n\n    if (!_.isBrowserSafari()) {\n      eInput.focus();\n    }\n\n    if (this.highlightAllOnFocus) {\n      eInput.select();\n    } else {\n      // when we started editing, we want the caret at the end, not the start.\n      // this comes into play in two scenarios: a) when user hits F2 and b)\n      // when user hits a printable character, then on IE (and only IE) the caret\n      // was placed after the first character, thus 'apply' would end up as 'pplea'\n      var length_1 = eInput.value ? eInput.value.length : 0;\n\n      if (length_1 > 0) {\n        eInput.setSelectionRange(length_1, length_1);\n      }\n    }\n  }; // gets called when tabbing trough cells and in full row edit mode\n\n\n  TextCellEditor.prototype.focusIn = function () {\n    var eInput = this.eInput;\n    eInput.focus();\n    eInput.select();\n  };\n\n  TextCellEditor.prototype.getValue = function () {\n    var eInput = this.eInput;\n    return this.params.parseValue(eInput.value);\n  };\n\n  TextCellEditor.prototype.getStartValue = function (params) {\n    var formatValue = params.useFormatter || params.column.getColDef().refData;\n    return formatValue ? params.formatValue(params.value) : params.value;\n  };\n\n  TextCellEditor.prototype.isPopup = function () {\n    return false;\n  };\n\n  TextCellEditor.TEMPLATE = '<div class=\"ag-input-wrapper\" role=\"presentation\"><input class=\"ag-cell-edit-input\" type=\"text\"/></div>';\n  return TextCellEditor;\n}(PopupComponent);\n\nexport { TextCellEditor };","map":null,"metadata":{},"sourceType":"module"}