{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v22.1.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { DragSourceType } from \"../dragAndDrop/dragAndDropService\";\nimport { Autowired, PostConstruct } from \"../context/context\";\nimport { MoveColumnController } from \"./moveColumnController\";\nimport { BodyDropPivotTarget } from \"./bodyDropPivotTarget\";\nimport { Constants } from \"../constants\";\nvar DropType;\n\n(function (DropType) {\n  DropType[DropType[\"ColumnMove\"] = 0] = \"ColumnMove\";\n  DropType[DropType[\"Pivot\"] = 1] = \"Pivot\";\n})(DropType || (DropType = {}));\n\nvar BodyDropTarget =\n/** @class */\nfunction () {\n  function BodyDropTarget(pinned, eContainer) {\n    this.dropListeners = {};\n    this.pinned = pinned;\n    this.eContainer = eContainer;\n  }\n\n  BodyDropTarget.prototype.registerGridComp = function (gridPanel) {\n    this.gridPanel = gridPanel;\n    this.moveColumnController.registerGridComp(gridPanel);\n\n    switch (this.pinned) {\n      case Constants.PINNED_LEFT:\n        this.eSecondaryContainers = this.gridPanel.getDropTargetLeftContainers();\n        break;\n\n      case Constants.PINNED_RIGHT:\n        this.eSecondaryContainers = this.gridPanel.getDropTargetRightContainers();\n        break;\n\n      default:\n        this.eSecondaryContainers = this.gridPanel.getDropTargetBodyContainers();\n        break;\n    }\n  };\n\n  BodyDropTarget.prototype.isInterestedIn = function (type) {\n    return type === DragSourceType.HeaderCell || type === DragSourceType.ToolPanel && this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel();\n  };\n\n  BodyDropTarget.prototype.getSecondaryContainers = function () {\n    return this.eSecondaryContainers;\n  };\n\n  BodyDropTarget.prototype.getContainer = function () {\n    return this.eContainer;\n  };\n\n  BodyDropTarget.prototype.init = function () {\n    this.moveColumnController = new MoveColumnController(this.pinned, this.eContainer);\n    this.context.wireBean(this.moveColumnController);\n    var bodyDropPivotTarget = new BodyDropPivotTarget(this.pinned);\n    this.context.wireBean(bodyDropPivotTarget);\n    this.dropListeners[DropType.ColumnMove] = this.moveColumnController;\n    this.dropListeners[DropType.Pivot] = bodyDropPivotTarget;\n    this.dragAndDropService.addDropTarget(this);\n  };\n\n  BodyDropTarget.prototype.getIconName = function () {\n    return this.currentDropListener.getIconName();\n  }; // we want to use the bodyPivotTarget if the user is dragging columns in from the toolPanel\n  // and we are in pivot mode, as it has to logic to set pivot/value/group on the columns when\n  // dropped into the grid's body.\n\n\n  BodyDropTarget.prototype.getDropType = function (draggingEvent) {\n    if (this.columnController.isPivotMode()) {\n      // in pivot mode, then if moving a column (ie didn't come from toolpanel) then it's\n      // a standard column move, however if it came from teh toolpanel, then we are introducing\n      // dimensions or values to the grid\n      if (draggingEvent.dragSource.type === DragSourceType.ToolPanel) {\n        return DropType.Pivot;\n      } else {\n        return DropType.ColumnMove;\n      }\n    } else {\n      // it's a column, and not pivot mode, so always moving\n      return DropType.ColumnMove;\n    }\n  };\n\n  BodyDropTarget.prototype.onDragEnter = function (draggingEvent) {\n    // we pick the drop listener depending on whether we are in pivot mode are not. if we are\n    // in pivot mode, then dropping cols changes the row group, pivot, value stats. otherwise\n    // we change visibility state and position.\n    // if (this.columnController.isPivotMode()) {\n    var dropType = this.getDropType(draggingEvent);\n    this.currentDropListener = this.dropListeners[dropType];\n    this.currentDropListener.onDragEnter(draggingEvent);\n  };\n\n  BodyDropTarget.prototype.onDragLeave = function (params) {\n    this.currentDropListener.onDragLeave(params);\n  };\n\n  BodyDropTarget.prototype.onDragging = function (params) {\n    this.currentDropListener.onDragging(params);\n  };\n\n  BodyDropTarget.prototype.onDragStop = function (params) {\n    this.currentDropListener.onDragStop(params);\n  };\n\n  __decorate([Autowired('context')], BodyDropTarget.prototype, \"context\", void 0);\n\n  __decorate([Autowired('dragAndDropService')], BodyDropTarget.prototype, \"dragAndDropService\", void 0);\n\n  __decorate([Autowired('columnController')], BodyDropTarget.prototype, \"columnController\", void 0);\n\n  __decorate([Autowired('gridOptionsWrapper')], BodyDropTarget.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([PostConstruct], BodyDropTarget.prototype, \"init\", null);\n\n  return BodyDropTarget;\n}();\n\nexport { BodyDropTarget };","map":null,"metadata":{},"sourceType":"module"}