!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,A,F){"use strict";var E="default"in A?A.default:A;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function w(e,t){var n=e.render,r=e.children,i=e.component,u=N(e,["render","children","component"]);if(i)return A.createElement(i,D({},u,{children:r,render:n}));if(n)return n(void 0===r?u:D({},u,{children:r}));if("function"!=typeof r)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+t);return r(u)}function V(e,t,n){void 0===n&&(n=function(e,t){return e===t});var r=E.useRef(e);E.useEffect(function(){n(e,r.current)||(t(),r.current=e)})}var C=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<n.length;u++){var a=n[u];if(!i(a)||e[a]!==t[a])return!1}return!0},k=function(e){return!(!e||"function"!=typeof e.stopPropagation)},x=A.createContext();function z(e){var t=E.useRef(e);return E.useEffect(function(){t.current=e}),t}var t="6.3.0",R={"final-form":F.version,"react-final-form":t},j=F.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function n(e){var t=e.debug,n=e.decorators,r=e.destroyOnUnregister,i=e.form,u=e.initialValues,a=e.initialValuesEqual,o=e.keepDirtyOnReinitialize,l=e.mutators,c=e.onSubmit,f=e.subscription,s=void 0===f?j:f,d=e.validate,v=e.validateOnBlur,m=N(e,["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),p={debug:t,destroyOnUnregister:r,initialValues:u,keepDirtyOnReinitialize:o,mutators:l,onSubmit:c,validate:d,validateOnBlur:v},b=function(e){var t=E.useRef();return t.current||(t.current=e()),t.current}(function(){var e=i||F.createForm(p);return e.pauseValidation(),e}),g=A.useState(function(){var t={};return b.subscribe(function(e){t=e},s)(),t}),y=g[0],h=g[1],S=z(y);A.useEffect(function(){b.isValidationPaused()&&b.resumeValidation();var e=[b.subscribe(function(e){C(e,S.current)||h(e)},s)].concat(n?n.map(function(e){return e(b)}):[]);return function(){e.forEach(function(e){return e()})}},[n]),V(t,function(){b.setConfig("debug",t)}),V(r,function(){b.destroyOnUnregister=!!r}),V(u,function(){b.setConfig("initialValues",u)},a||C),V(o,function(){b.setConfig("keepDirtyOnReinitialize",o)}),V(l,function(){b.setConfig("mutators",l)}),V(c,function(){b.setConfig("onSubmit",c)}),V(d,function(){b.setConfig("validate",d)}),V(v,function(){b.setConfig("validateOnBlur",v)});var O=D({},y,{form:D({},b,{reset:function(e){k(e)?b.reset():b.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),b.submit()}});return A.createElement(x.Provider,{value:b},w(D({},m,O,{__versions:R}),"ReactFinalForm"))}function _(e){var t=A.useContext(x);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function a(e){var t=void 0===e?{}:e,n=t.onChange,r=t.subscription,i=void 0===r?j:r,u=_("useFormState"),a=A.useRef(!0),o=A.useState(function(){var t={};return u.subscribe(function(e){t=e},i)(),n&&n(t),t}),l=o[0],c=o[1];return A.useEffect(function(){return u.subscribe(function(e){a.current?a.current=!1:(c(e),n&&n(e))},i)},[]),l}function r(e){var t=e.onChange,n=e.subscription,r=N(e,["onChange","subscription"]),i=_("FormSpy"),u=a({onChange:t,subscription:n});return t?null:w(D({},r,u,{form:D({},i,{reset:function(e){k(e)?i.reset():i.reset(e)}})}),"FormSpy")}function I(e,t){return void 0===e?"":e}function L(e,t){return""===e?void 0:e}var M="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,T=F.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function O(n,e){function r(e){return E.registerField(n,e,y,{afterSubmit:i,beforeSubmit:function(){return V.current()},defaultValue:l,getValidator:function(){return w.current},initialValue:d,isEqual:v,validateFields:O})}var t=void 0===e?{}:e,i=t.afterSubmit,u=t.allowNull,a=t.beforeSubmit,o=t.component,l=t.defaultValue,c=t.format,f=void 0===c?I:c,s=t.formatOnBlur,d=t.initialValue,v=t.isEqual,m=t.multiple,p=t.parse,b=void 0===p?L:p,g=t.subscription,y=void 0===g?T:g,h=t.type,S=t.validate,O=t.validateFields,F=t.value,E=_("useField"),w=z(S),V=z(function(){if(s){var e=f(x.value,x.name);e!==x.value&&x.change(e)}return a&&a()}),C=A.useRef(!0),k=A.useState(function(){var t={},e=E.destroyOnUnregister;return E.destroyOnUnregister=!1,r(function(e){t=e})(),E.destroyOnUnregister=e,t}),x=k[0],R=k[1];A.useEffect(function(){return r(function(e){C.current?C.current=!1:R(e)})},[n,l,d,v]);var j={onBlur:A.useCallback(function(e){if(x.blur(),s){var t=E.getFieldState(x.name);x.change(f(t?t.value:x.value,x.name))}},[x.name,x.value,f,s]),onChange:A.useCallback(function(e){var t=e&&e.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,u=i.type,a=i.value,o=i.checked;switch(u){case"checkbox":if(void 0===n)return!!o;if(o)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var l=t.indexOf(n);return l<0?t:t.slice(0,l).concat(t.slice(l+1));case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return a}}(e,x.value,F,M):e;x.change(b(t,n))},[F,n,b,x.change,x.value,h]),onFocus:A.useCallback(function(e){x.focus()},[])},q=(x.blur,x.change,x.focus,x.value),B=(x.name,N(x,["blur","change","focus","value","name"])),P={active:B.active,data:B.data,dirty:B.dirty,dirtySinceLastSubmit:B.dirtySinceLastSubmit,error:B.error,initial:B.initial,invalid:B.invalid,length:B.length,modified:B.modified,pristine:B.pristine,submitError:B.submitError,submitFailed:B.submitFailed,submitSucceeded:B.submitSucceeded,submitting:B.submitting,touched:B.touched,valid:B.valid,validating:B.validating,visited:B.visited};s?"input"===o&&(q=I(q)):q=f(q,n),null!==q||u||(q="");var U=D({name:n,value:q,type:h},j);return"checkbox"===h?void 0===F?U.checked=!!q:(U.checked=!(!Array.isArray(q)||!~q.indexOf(F)),U.value=F):"radio"===h?(U.checked=q===F,U.value=F):"select"===o&&m&&(U.value=U.value||[],U.multiple=!0),{input:U,meta:P}}e.Field=function(e){var t=e.afterSubmit,n=e.allowNull,r=e.beforeSubmit,i=e.children,u=e.component,a=e.defaultValue,o=e.format,l=e.formatOnBlur,c=e.initialValue,f=e.isEqual,s=e.multiple,d=e.name,v=e.parse,m=e.subscription,p=e.type,b=e.validate,g=e.validateFields,y=e.value,h=N(e,["afterSubmit","allowNull","beforeSubmit","children","component","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),S=O(d,{afterSubmit:t,allowNull:n,beforeSubmit:r,children:i,component:u,defaultValue:a,format:o,formatOnBlur:l,initialValue:c,isEqual:f,multiple:s,parse:v,subscription:m,type:p,validate:b,validateFields:g,value:y});return"function"==typeof i?i(D({},S,h)):"string"==typeof u?A.createElement(u,D({},S.input,{children:i},h)):w(D({},S,{children:i,component:u},h),"Field("+d+")")},e.Form=n,e.FormSpy=r,e.useField=O,e.useForm=_,e.useFormState=a,e.version=t,e.withTypes=function(){return{Form:n,FormSpy:r}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
